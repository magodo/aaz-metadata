{"argGroups":[{"args":[{"format":{"pattern":"^[^_\\W][\\w-._]{0,79}(?<![-.])$"},"help":{"short":"The name of the Firewall Policy."},"idPart":"name","options":["firewall-policy-name"],"required":true,"type":"string","var":"$Path.firewallPolicyName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.Network/firewallPolicies/{}/firewallPolicyDrafts/default"},"group":"Parameters","help":{"short":"Resource ID."},"hide":true,"options":["id"],"type":"ResourceId","var":"$parameters.id"},{"group":"Parameters","help":{"short":"Resource location."},"options":["l","location"],"type":"ResourceLocation","var":"$parameters.location"},{"additionalProps":{"item":{"type":"string"}},"group":"Parameters","help":{"short":"Resource tags."},"options":["tags"],"type":"object","var":"$parameters.tags"}],"name":"Parameters"},{"args":[{"args":[{"help":{"short":"Resource ID."},"options":["id"],"type":"string","var":"@SubResource_create.id"}],"cls":"SubResource_create","group":"Properties","help":{"short":"The parent firewall policy from which rules are inherited."},"options":["base-policy"],"type":"object","var":"$parameters.properties.basePolicy"},{"args":[{"help":{"short":"Enable DNS Proxy on Firewalls attached to the Firewall Policy."},"options":["enable-proxy"],"type":"boolean","var":"$parameters.properties.dnsSettings.enableProxy"},{"help":{"short":"FQDNs in Network Rules are supported when set to true."},"nullable":true,"options":["require-proxy-for-network-rules"],"type":"boolean","var":"$parameters.properties.dnsSettings.requireProxyForNetworkRules"},{"help":{"short":"List of Custom DNS Servers."},"item":{"type":"string"},"options":["servers"],"type":"array<string>","var":"$parameters.properties.dnsSettings.servers"}],"group":"Properties","help":{"short":"DNS Proxy Settings definition."},"options":["dns-settings"],"type":"object","var":"$parameters.properties.dnsSettings"},{"args":[{"help":{"short":"When set to true, explicit proxy mode is enabled."},"nullable":true,"options":["enable-explicit-proxy"],"type":"boolean","var":"$parameters.properties.explicitProxy.enableExplicitProxy"},{"help":{"short":"When set to true, pac file port and url needs to be provided."},"nullable":true,"options":["enable-pac-file"],"type":"boolean","var":"$parameters.properties.explicitProxy.enablePacFile"},{"format":{"maximum":64000,"minimum":0},"help":{"short":"Port number for explicit proxy http protocol, cannot be greater than 64000."},"options":["http-port"],"type":"integer32","var":"$parameters.properties.explicitProxy.httpPort"},{"format":{"maximum":64000,"minimum":0},"help":{"short":"Port number for explicit proxy https protocol, cannot be greater than 64000."},"options":["https-port"],"type":"integer32","var":"$parameters.properties.explicitProxy.httpsPort"},{"help":{"short":"SAS URL for PAC file."},"options":["pac-file"],"type":"string","var":"$parameters.properties.explicitProxy.pacFile"},{"format":{"maximum":64000,"minimum":0},"help":{"short":"Port number for firewall to serve PAC file."},"options":["pac-file-port"],"type":"integer32","var":"$parameters.properties.explicitProxy.pacFilePort"}],"group":"Properties","help":{"short":"Explicit Proxy Settings definition."},"options":["explicit-proxy"],"type":"object","var":"$parameters.properties.explicitProxy"},{"args":[{"help":{"short":"A flag to indicate if the insights are enabled on the policy."},"options":["is-enabled"],"type":"boolean","var":"$parameters.properties.insights.isEnabled"},{"args":[{"help":{"short":"The default workspace Id for Firewall Policy Insights."},"options":["default-workspace-id"],"type":"@SubResource_create","var":"$parameters.properties.insights.logAnalyticsResources.defaultWorkspaceId"},{"help":{"short":"List of workspaces for Firewall Policy Insights."},"item":{"args":[{"help":{"short":"Region to configure the Workspace."},"options":["region"],"type":"string","var":"$parameters.properties.insights.logAnalyticsResources.workspaces[].region"},{"help":{"short":"The workspace Id for Firewall Policy Insights."},"options":["workspace-id"],"type":"@SubResource_create","var":"$parameters.properties.insights.logAnalyticsResources.workspaces[].workspaceId"}],"type":"object"},"options":["workspaces"],"type":"array<object>","var":"$parameters.properties.insights.logAnalyticsResources.workspaces"}],"help":{"short":"Workspaces needed to configure the Firewall Policy Insights."},"options":["log-analytics-resources"],"type":"object","var":"$parameters.properties.insights.logAnalyticsResources"},{"help":{"short":"Number of days the insights should be enabled on the policy."},"options":["retention-days"],"type":"integer32","var":"$parameters.properties.insights.retentionDays"}],"group":"Properties","help":{"short":"Insights on Firewall Policy."},"options":["insights"],"type":"object","var":"$parameters.properties.insights"},{"args":[{"args":[{"help":{"short":"List of rules for traffic to bypass."},"item":{"args":[{"help":{"short":"Description of the bypass traffic rule."},"options":["description"],"type":"string","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].description"},{"help":{"short":"List of destination IP addresses or ranges for this rule."},"item":{"type":"string"},"options":["destination-addresses"],"type":"array<string>","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].destinationAddresses"},{"help":{"short":"List of destination IpGroups for this rule."},"item":{"type":"string"},"options":["destination-ip-groups"],"type":"array<string>","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].destinationIpGroups"},{"help":{"short":"List of destination ports or ranges."},"item":{"type":"string"},"options":["destination-ports"],"type":"array<string>","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].destinationPorts"},{"help":{"short":"Name of the bypass traffic rule."},"options":["name"],"type":"string","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].name"},{"enum":{"items":[{"name":"ANY","value":"ANY"},{"name":"ICMP","value":"ICMP"},{"name":"TCP","value":"TCP"},{"name":"UDP","value":"UDP"}]},"help":{"short":"The rule bypass protocol."},"options":["protocol"],"type":"string","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].protocol"},{"help":{"short":"List of source IP addresses or ranges for this rule."},"item":{"type":"string"},"options":["source-addresses"],"type":"array<string>","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].sourceAddresses"},{"help":{"short":"List of source IpGroups for this rule."},"item":{"type":"string"},"options":["source-ip-groups"],"type":"array<string>","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].sourceIpGroups"}],"type":"object"},"options":["bypass-traffic-settings"],"type":"array<object>","var":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings"},{"help":{"short":"IDPS Private IP address ranges are used to identify traffic direction (i.e. inbound, outbound, etc.). By default, only ranges defined by IANA RFC 1918 are considered private IP addresses. To modify default ranges, specify your Private IP address ranges with this property"},"item":{"type":"string"},"options":["private-ranges"],"type":"array<string>","var":"$parameters.properties.intrusionDetection.configuration.privateRanges"},{"help":{"short":"List of specific signatures states."},"item":{"args":[{"help":{"short":"Signature id."},"options":["id"],"type":"string","var":"$parameters.properties.intrusionDetection.configuration.signatureOverrides[].id"},{"enum":{"items":[{"name":"Alert","value":"Alert"},{"name":"Deny","value":"Deny"},{"name":"Off","value":"Off"}]},"help":{"short":"The signature state."},"options":["mode"],"type":"string","var":"$parameters.properties.intrusionDetection.configuration.signatureOverrides[].mode"}],"type":"object"},"options":["signature-overrides"],"type":"array<object>","var":"$parameters.properties.intrusionDetection.configuration.signatureOverrides"}],"help":{"short":"Intrusion detection configuration properties."},"options":["configuration"],"type":"object","var":"$parameters.properties.intrusionDetection.configuration"},{"enum":{"items":[{"name":"Alert","value":"Alert"},{"name":"Deny","value":"Deny"},{"name":"Off","value":"Off"}]},"help":{"short":"Intrusion detection general state. When attached to a parent policy, the firewall's effective IDPS mode is the stricter mode of the two."},"options":["mode"],"type":"string","var":"$parameters.properties.intrusionDetection.mode"},{"enum":{"items":[{"name":"Advanced","value":"Advanced"},{"name":"Basic","value":"Basic"},{"name":"Extended","value":"Extended"},{"name":"Standard","value":"Standard"}]},"help":{"short":"IDPS profile name. When attached to a parent policy, the firewall's effective profile is the profile name of the parent policy."},"options":["profile"],"type":"string","var":"$parameters.properties.intrusionDetection.profile"}],"group":"Properties","help":{"short":"The configuration for Intrusion detection."},"options":["intrusion-detection"],"type":"object","var":"$parameters.properties.intrusionDetection"},{"args":[{"enum":{"items":[{"name":"Disabled","value":"Disabled"},{"name":"Enabled","value":"Enabled"}]},"help":{"short":"The operation mode for automatically learning private ranges to not be SNAT"},"options":["auto-learn-private-ranges"],"type":"string","var":"$parameters.properties.snat.autoLearnPrivateRanges"},{"help":{"short":"List of private IP addresses/IP address ranges to not be SNAT."},"item":{"type":"string"},"options":["private-ranges"],"type":"array<string>","var":"$parameters.properties.snat.privateRanges"}],"group":"Properties","help":{"short":"The private IP addresses/IP ranges to which traffic will not be SNAT."},"options":["snat"],"type":"object","var":"$parameters.properties.snat"},{"args":[{"help":{"short":"A flag to indicate if SQL Redirect traffic filtering is enabled. Turning on the flag requires no rule using port 11000-11999."},"options":["allow-sql-redirect"],"type":"boolean","var":"$parameters.properties.sql.allowSqlRedirect"}],"group":"Properties","help":{"short":"SQL Settings definition."},"options":["sql"],"type":"object","var":"$parameters.properties.sql"},{"enum":{"items":[{"name":"Alert","value":"Alert"},{"name":"Deny","value":"Deny"},{"name":"Off","value":"Off"}]},"group":"Properties","help":{"short":"The operation mode for Threat Intelligence."},"options":["threat-intel-mode"],"type":"string","var":"$parameters.properties.threatIntelMode"},{"args":[{"help":{"short":"List of FQDNs for the ThreatIntel Whitelist."},"item":{"type":"string"},"options":["fqdns"],"type":"array<string>","var":"$parameters.properties.threatIntelWhitelist.fqdns"},{"help":{"short":"List of IP addresses for the ThreatIntel Whitelist."},"item":{"type":"string"},"options":["ip-addresses"],"type":"array<string>","var":"$parameters.properties.threatIntelWhitelist.ipAddresses"}],"group":"Properties","help":{"short":"ThreatIntel Whitelist for Firewall Policy."},"options":["threat-intel-whitelist"],"type":"object","var":"$parameters.properties.threatIntelWhitelist"}],"name":"Properties"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/firewallPolicies/{firewallPolicyName}/firewallPolicyDrafts/default","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"parameters","props":[{"arg":"$parameters.id","format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.Network/firewallPolicies/{}/firewallPolicyDrafts/default"},"name":"id","type":"ResourceId"},{"arg":"$parameters.location","name":"location","type":"ResourceLocation"},{"clientFlatten":true,"name":"properties","props":[{"arg":"$parameters.properties.basePolicy","cls":"SubResource_create","name":"basePolicy","props":[{"arg":"@SubResource_create.id","name":"id","type":"string"}],"type":"object"},{"arg":"$parameters.properties.dnsSettings","name":"dnsSettings","props":[{"arg":"$parameters.properties.dnsSettings.enableProxy","name":"enableProxy","type":"boolean"},{"arg":"$parameters.properties.dnsSettings.requireProxyForNetworkRules","name":"requireProxyForNetworkRules","nullable":true,"type":"boolean"},{"arg":"$parameters.properties.dnsSettings.servers","item":{"type":"string"},"name":"servers","type":"array<string>"}],"type":"object"},{"arg":"$parameters.properties.explicitProxy","name":"explicitProxy","props":[{"arg":"$parameters.properties.explicitProxy.enableExplicitProxy","name":"enableExplicitProxy","nullable":true,"type":"boolean"},{"arg":"$parameters.properties.explicitProxy.enablePacFile","name":"enablePacFile","nullable":true,"type":"boolean"},{"arg":"$parameters.properties.explicitProxy.httpPort","format":{"maximum":64000,"minimum":0},"name":"httpPort","type":"integer32"},{"arg":"$parameters.properties.explicitProxy.httpsPort","format":{"maximum":64000,"minimum":0},"name":"httpsPort","type":"integer32"},{"arg":"$parameters.properties.explicitProxy.pacFile","name":"pacFile","type":"string"},{"arg":"$parameters.properties.explicitProxy.pacFilePort","format":{"maximum":64000,"minimum":0},"name":"pacFilePort","type":"integer32"}],"type":"object"},{"arg":"$parameters.properties.insights","name":"insights","props":[{"arg":"$parameters.properties.insights.isEnabled","name":"isEnabled","type":"boolean"},{"arg":"$parameters.properties.insights.logAnalyticsResources","name":"logAnalyticsResources","props":[{"arg":"$parameters.properties.insights.logAnalyticsResources.defaultWorkspaceId","name":"defaultWorkspaceId","type":"@SubResource_create"},{"arg":"$parameters.properties.insights.logAnalyticsResources.workspaces","item":{"props":[{"arg":"$parameters.properties.insights.logAnalyticsResources.workspaces[].region","name":"region","type":"string"},{"arg":"$parameters.properties.insights.logAnalyticsResources.workspaces[].workspaceId","name":"workspaceId","type":"@SubResource_create"}],"type":"object"},"name":"workspaces","type":"array<object>"}],"type":"object"},{"arg":"$parameters.properties.insights.retentionDays","name":"retentionDays","type":"integer32"}],"type":"object"},{"arg":"$parameters.properties.intrusionDetection","name":"intrusionDetection","props":[{"arg":"$parameters.properties.intrusionDetection.configuration","name":"configuration","props":[{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings","item":{"props":[{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].description","name":"description","type":"string"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].destinationAddresses","item":{"type":"string"},"name":"destinationAddresses","type":"array<string>"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].destinationIpGroups","item":{"type":"string"},"name":"destinationIpGroups","type":"array<string>"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].destinationPorts","item":{"type":"string"},"name":"destinationPorts","type":"array<string>"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].name","name":"name","type":"string"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].protocol","enum":{"items":[{"value":"ANY"},{"value":"ICMP"},{"value":"TCP"},{"value":"UDP"}]},"name":"protocol","type":"string"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].sourceAddresses","item":{"type":"string"},"name":"sourceAddresses","type":"array<string>"},{"arg":"$parameters.properties.intrusionDetection.configuration.bypassTrafficSettings[].sourceIpGroups","item":{"type":"string"},"name":"sourceIpGroups","type":"array<string>"}],"type":"object"},"name":"bypassTrafficSettings","type":"array<object>"},{"arg":"$parameters.properties.intrusionDetection.configuration.privateRanges","item":{"type":"string"},"name":"privateRanges","type":"array<string>"},{"arg":"$parameters.properties.intrusionDetection.configuration.signatureOverrides","item":{"props":[{"arg":"$parameters.properties.intrusionDetection.configuration.signatureOverrides[].id","name":"id","type":"string"},{"arg":"$parameters.properties.intrusionDetection.configuration.signatureOverrides[].mode","enum":{"items":[{"value":"Alert"},{"value":"Deny"},{"value":"Off"}]},"name":"mode","type":"string"}],"type":"object"},"name":"signatureOverrides","type":"array<object>"}],"type":"object"},{"arg":"$parameters.properties.intrusionDetection.mode","enum":{"items":[{"value":"Alert"},{"value":"Deny"},{"value":"Off"}]},"name":"mode","type":"string"},{"arg":"$parameters.properties.intrusionDetection.profile","enum":{"items":[{"value":"Advanced"},{"value":"Basic"},{"value":"Extended"},{"value":"Standard"}]},"name":"profile","type":"string"}],"type":"object"},{"arg":"$parameters.properties.snat","name":"snat","props":[{"arg":"$parameters.properties.snat.autoLearnPrivateRanges","enum":{"items":[{"value":"Disabled"},{"value":"Enabled"}]},"name":"autoLearnPrivateRanges","type":"string"},{"arg":"$parameters.properties.snat.privateRanges","item":{"type":"string"},"name":"privateRanges","type":"array<string>"}],"type":"object"},{"arg":"$parameters.properties.sql","name":"sql","props":[{"arg":"$parameters.properties.sql.allowSqlRedirect","name":"allowSqlRedirect","type":"boolean"}],"type":"object"},{"arg":"$parameters.properties.threatIntelMode","enum":{"items":[{"value":"Alert"},{"value":"Deny"},{"value":"Off"}]},"name":"threatIntelMode","type":"string"},{"arg":"$parameters.properties.threatIntelWhitelist","name":"threatIntelWhitelist","props":[{"arg":"$parameters.properties.threatIntelWhitelist.fqdns","item":{"type":"string"},"name":"fqdns","type":"array<string>"},{"arg":"$parameters.properties.threatIntelWhitelist.ipAddresses","item":{"type":"string"},"name":"ipAddresses","type":"array<string>"}],"type":"object"}],"type":"object"},{"additionalProps":{"item":{"type":"string"}},"arg":"$parameters.tags","name":"tags","type":"object"}],"required":true,"type":"object"}}},"method":"put","path":{"params":[{"arg":"$Path.firewallPolicyName","format":{"pattern":"^[^_\\W][\\w-._]{0,79}(?<![-.])$"},"name":"firewallPolicyName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","name":"subscriptionId","required":true,"type":"string"}]},"query":{"consts":[{"const":true,"default":{"value":"2024-07-01"},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.Network/firewallPolicies/{}/firewallPolicyDrafts/default"},"name":"id","type":"ResourceId"},{"name":"location","type":"ResourceLocation"},{"name":"name","readOnly":true,"type":"string"},{"clientFlatten":true,"name":"properties","props":[{"cls":"SubResource_read","name":"basePolicy","props":[{"name":"id","type":"string"}],"type":"object"},{"name":"dnsSettings","props":[{"name":"enableProxy","type":"boolean"},{"name":"requireProxyForNetworkRules","nullable":true,"type":"boolean"},{"item":{"type":"string"},"name":"servers","type":"array<string>"}],"type":"object"},{"name":"explicitProxy","props":[{"name":"enableExplicitProxy","nullable":true,"type":"boolean"},{"name":"enablePacFile","nullable":true,"type":"boolean"},{"format":{"maximum":64000,"minimum":0},"name":"httpPort","type":"integer32"},{"format":{"maximum":64000,"minimum":0},"name":"httpsPort","type":"integer32"},{"name":"pacFile","type":"string"},{"format":{"maximum":64000,"minimum":0},"name":"pacFilePort","type":"integer32"}],"type":"object"},{"name":"insights","props":[{"name":"isEnabled","type":"boolean"},{"name":"logAnalyticsResources","props":[{"name":"defaultWorkspaceId","type":"@SubResource_read"},{"item":{"props":[{"name":"region","type":"string"},{"name":"workspaceId","type":"@SubResource_read"}],"type":"object"},"name":"workspaces","type":"array<object>"}],"type":"object"},{"name":"retentionDays","type":"integer32"}],"type":"object"},{"name":"intrusionDetection","props":[{"name":"configuration","props":[{"item":{"props":[{"name":"description","type":"string"},{"item":{"type":"string"},"name":"destinationAddresses","type":"array<string>"},{"item":{"type":"string"},"name":"destinationIpGroups","type":"array<string>"},{"item":{"type":"string"},"name":"destinationPorts","type":"array<string>"},{"name":"name","type":"string"},{"enum":{"items":[{"value":"ANY"},{"value":"ICMP"},{"value":"TCP"},{"value":"UDP"}]},"name":"protocol","type":"string"},{"item":{"type":"string"},"name":"sourceAddresses","type":"array<string>"},{"item":{"type":"string"},"name":"sourceIpGroups","type":"array<string>"}],"type":"object"},"name":"bypassTrafficSettings","type":"array<object>"},{"item":{"type":"string"},"name":"privateRanges","type":"array<string>"},{"item":{"props":[{"name":"id","type":"string"},{"enum":{"items":[{"value":"Alert"},{"value":"Deny"},{"value":"Off"}]},"name":"mode","type":"string"}],"type":"object"},"name":"signatureOverrides","type":"array<object>"}],"type":"object"},{"enum":{"items":[{"value":"Alert"},{"value":"Deny"},{"value":"Off"}]},"name":"mode","type":"string"},{"enum":{"items":[{"value":"Advanced"},{"value":"Basic"},{"value":"Extended"},{"value":"Standard"}]},"name":"profile","type":"string"}],"type":"object"},{"name":"snat","props":[{"enum":{"items":[{"value":"Disabled"},{"value":"Enabled"}]},"name":"autoLearnPrivateRanges","type":"string"},{"item":{"type":"string"},"name":"privateRanges","type":"array<string>"}],"type":"object"},{"name":"sql","props":[{"name":"allowSqlRedirect","type":"boolean"}],"type":"object"},{"enum":{"items":[{"value":"Alert"},{"value":"Deny"},{"value":"Off"}]},"name":"threatIntelMode","type":"string"},{"name":"threatIntelWhitelist","props":[{"item":{"type":"string"},"name":"fqdns","type":"array<string>"},{"item":{"type":"string"},"name":"ipAddresses","type":"array<string>"}],"type":"object"}],"type":"object"},{"additionalProps":{"item":{"type":"string"}},"name":"tags","type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@ODataV4Format"}}},"isError":true}]},"operationId":"FirewallPolicyDrafts_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.network/firewallpolicies/{}/firewallpolicydrafts/default","plane":"mgmt-plane"}]}