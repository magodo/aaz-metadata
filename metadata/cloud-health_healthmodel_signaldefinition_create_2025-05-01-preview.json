{"argGroups":[{"args":[{"format":{"pattern":"^[a-zA-Z][a-zA-Z0-9-]{1,42}[a-zA-Z0-9]$"},"help":{"short":"Name of health model resource"},"idPart":"name","options":["health-model-name"],"required":true,"type":"string","var":"$Path.healthModelName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"format":{"pattern":"^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"},"help":{"short":"Name of the signal definition. Must be unique within a health model."},"idPart":"child_name_1","options":["n","name","signal-definition-name"],"required":true,"type":"string","var":"$Path.signalDefinitionName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"args":[{"enum":{"items":[{"name":"Average","value":"Average"},{"name":"Count","value":"Count"},{"name":"Maximum","value":"Maximum"},{"name":"Minimum","value":"Minimum"},{"name":"None","value":"None"},{"name":"Total","value":"Total"}]},"help":{"short":"Type of aggregation to apply to the metric"},"options":["aggregation-type"],"required":true,"type":"string","var":"$resource.properties.AzureResourceMetric.aggregationType"},{"format":{"maxLength":256,"minLength":1},"help":{"short":"Optional: Dimension to split by"},"options":["dimension"],"type":"string","var":"$resource.properties.AzureResourceMetric.dimension"},{"format":{"maxLength":256,"minLength":1},"help":{"short":"Optional: Dimension filter to apply to the dimension. Must only be set if also Dimension is set."},"options":["dimension-filter"],"type":"string","var":"$resource.properties.AzureResourceMetric.dimensionFilter"},{"format":{"maxLength":256,"minLength":1},"help":{"short":"Name of the metric"},"options":["metric-name"],"required":true,"type":"string","var":"$resource.properties.AzureResourceMetric.metricName"},{"format":{"maxLength":256,"minLength":1},"help":{"short":"Metric namespace"},"options":["metric-namespace"],"required":true,"type":"string","var":"$resource.properties.AzureResourceMetric.metricNamespace"},{"format":{"maxLength":100,"minLength":1},"help":{"short":"Time range of signal. ISO duration format like PT10M."},"options":["time-grain"],"required":true,"type":"string","var":"$resource.properties.AzureResourceMetric.timeGrain"}],"group":"Properties","options":["azure-resource-metric"],"type":"object","var":"$resource.properties.AzureResourceMetric"},{"args":[{"format":{"maxLength":5000,"minLength":1},"help":{"short":"Query text in KQL syntax"},"options":["query-text"],"required":true,"type":"string","var":"$resource.properties.LogAnalyticsQuery.queryText"},{"format":{"maxLength":100,"minLength":1},"help":{"short":"Time range of signal. ISO duration format like PT10M. If not specified, the KQL query must define a time range."},"options":["time-grain"],"type":"string","var":"$resource.properties.LogAnalyticsQuery.timeGrain"},{"format":{"maxLength":100,"minLength":1},"help":{"short":"Name of the column in the result set to evaluate against the thresholds. Defaults to the first column in the result set if not specified. The column must be numeric."},"options":["value-column-name"],"type":"string","var":"$resource.properties.LogAnalyticsQuery.valueColumnName"}],"group":"Properties","options":["log-analytics-query"],"type":"object","var":"$resource.properties.LogAnalyticsQuery"},{"args":[{"format":{"maxLength":5000,"minLength":1},"help":{"short":"Query text in PromQL syntax"},"options":["query-text"],"required":true,"type":"string","var":"$resource.properties.PrometheusMetricsQuery.queryText"},{"format":{"maxLength":100,"minLength":1},"help":{"short":"Time range of signal. ISO duration format like PT10M."},"options":["time-grain"],"type":"string","var":"$resource.properties.PrometheusMetricsQuery.timeGrain"}],"group":"Properties","options":["prometheus-metrics-query"],"type":"object","var":"$resource.properties.PrometheusMetricsQuery"},{"format":{"maxLength":100,"minLength":1},"group":"Properties","help":{"short":"Unit of the signal result (e.g. Bytes, MilliSeconds, Percent, Count))"},"options":["data-unit"],"type":"string","var":"$resource.properties.dataUnit"},{"format":{"maxLength":260,"minLength":1},"group":"Properties","help":{"short":"Display name"},"options":["display-name"],"type":"string","var":"$resource.properties.displayName"},{"args":[{"args":[{"enum":{"items":[{"name":"Equals","value":"Equals"},{"name":"GreaterOrEquals","value":"GreaterOrEquals"},{"name":"GreaterThan","value":"GreaterThan"},{"name":"LowerOrEquals","value":"LowerOrEquals"},{"name":"LowerThan","value":"LowerThan"}]},"help":{"short":"Operator how to compare the signal value with the threshold"},"options":["operator"],"required":true,"type":"string","var":"@ThresholdRule_create.operator"},{"format":{"maxLength":100,"minLength":1},"help":{"short":"Threshold value"},"options":["threshold"],"required":true,"type":"string","var":"@ThresholdRule_create.threshold"}],"cls":"ThresholdRule_create","help":{"short":"Degraded rule with static threshold. When used, dynamicDetectionRule must not be set."},"options":["degraded-rule"],"type":"object","var":"$resource.properties.evaluationRules.degradedRule"},{"args":[{"enum":{"items":[{"name":"GreaterOrLowerThan","value":"GreaterOrLowerThan"},{"name":"GreaterThan","value":"GreaterThan"},{"name":"LowerThan","value":"LowerThan"}]},"help":{"short":"Threshold direction"},"options":["dynamic-threshold-direction"],"required":true,"type":"string","var":"$resource.properties.evaluationRules.dynamicDetectionRule.dynamicThresholdDirection"},{"enum":{"items":[{"name":"AnomalyDetection","value":"AnomalyDetection"}]},"help":{"short":"ML model to use for dynamic thresholds"},"options":["dynamic-threshold-model"],"required":true,"type":"string","var":"$resource.properties.evaluationRules.dynamicDetectionRule.dynamicThresholdModel"},{"format":{"maximum":5.0,"minimum":0},"help":{"short":"ML model sensitivity. Lowest value = high sensitivity. Supported step size = 0.5"},"options":["model-sensitivity"],"required":true,"type":"float32","var":"$resource.properties.evaluationRules.dynamicDetectionRule.modelSensitivity"},{"format":{"protocol":"iso"},"help":{"short":"Start time of the training in UTC."},"options":["training-start-time"],"type":"dateTime","var":"$resource.properties.evaluationRules.dynamicDetectionRule.trainingStartTime"}],"help":{"short":"Configure to use ML-based dynamic thresholds. When used, degradedRule and unhealthyRule must not be set."},"options":["dynamic-detection-rule"],"type":"object","var":"$resource.properties.evaluationRules.dynamicDetectionRule"},{"help":{"short":"Unhealthy rule with static threshold. When used, dynamicDetectionRule must not be set."},"options":["unhealthy-rule"],"type":"@ThresholdRule_create","var":"$resource.properties.evaluationRules.unhealthyRule"}],"group":"Properties","help":{"short":"Evaluation rules for the signal definition"},"options":["evaluation-rules"],"type":"object","var":"$resource.properties.evaluationRules"},{"additionalProps":{"item":{"format":{"maxLength":4096},"type":"string"}},"group":"Properties","help":{"short":"Optional set of labels (key-value pairs)"},"options":["labels"],"type":"object","var":"$resource.properties.labels"},{"default":{"value":"PT1M"},"enum":{"items":[{"name":"PT10M","value":"PT10M"},{"name":"PT1H","value":"PT1H"},{"name":"PT1M","value":"PT1M"},{"name":"PT2H","value":"PT2H"},{"name":"PT30M","value":"PT30M"},{"name":"PT5M","value":"PT5M"}]},"group":"Properties","help":{"short":"Interval in which the signal is being evaluated. Defaults to PT1M (1 minute)."},"options":["refresh-interval"],"type":"string","var":"$resource.properties.refreshInterval"}],"name":"Properties"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.CloudHealth/healthmodels/{healthModelName}/signaldefinitions/{signalDefinitionName}","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"resource","props":[{"discriminators":[{"property":"signalKind","props":[{"arg":"$resource.properties.AzureResourceMetric.aggregationType","enum":{"items":[{"value":"Average"},{"value":"Count"},{"value":"Maximum"},{"value":"Minimum"},{"value":"None"},{"value":"Total"}]},"name":"aggregationType","required":true,"type":"string"},{"arg":"$resource.properties.AzureResourceMetric.dimension","format":{"maxLength":256,"minLength":1},"name":"dimension","type":"string"},{"arg":"$resource.properties.AzureResourceMetric.dimensionFilter","format":{"maxLength":256,"minLength":1},"name":"dimensionFilter","type":"string"},{"arg":"$resource.properties.AzureResourceMetric.metricName","format":{"maxLength":256,"minLength":1},"name":"metricName","required":true,"type":"string"},{"arg":"$resource.properties.AzureResourceMetric.metricNamespace","format":{"maxLength":256,"minLength":1},"name":"metricNamespace","required":true,"type":"string"},{"arg":"$resource.properties.AzureResourceMetric.timeGrain","format":{"maxLength":100,"minLength":1},"name":"timeGrain","required":true,"type":"string"}],"value":"AzureResourceMetric"},{"property":"signalKind","props":[{"arg":"$resource.properties.LogAnalyticsQuery.queryText","format":{"maxLength":5000,"minLength":1},"name":"queryText","required":true,"type":"string"},{"arg":"$resource.properties.LogAnalyticsQuery.timeGrain","format":{"maxLength":100,"minLength":1},"name":"timeGrain","type":"string"},{"arg":"$resource.properties.LogAnalyticsQuery.valueColumnName","format":{"maxLength":100,"minLength":1},"name":"valueColumnName","type":"string"}],"value":"LogAnalyticsQuery"},{"property":"signalKind","props":[{"arg":"$resource.properties.PrometheusMetricsQuery.queryText","format":{"maxLength":5000,"minLength":1},"name":"queryText","required":true,"type":"string"},{"arg":"$resource.properties.PrometheusMetricsQuery.timeGrain","format":{"maxLength":100,"minLength":1},"name":"timeGrain","type":"string"}],"value":"PrometheusMetricsQuery"}],"name":"properties","props":[{"arg":"$resource.properties.dataUnit","format":{"maxLength":100,"minLength":1},"name":"dataUnit","type":"string"},{"arg":"$resource.properties.displayName","format":{"maxLength":260,"minLength":1},"name":"displayName","type":"string"},{"arg":"$resource.properties.evaluationRules","name":"evaluationRules","props":[{"arg":"$resource.properties.evaluationRules.degradedRule","cls":"ThresholdRule_create","name":"degradedRule","props":[{"arg":"@ThresholdRule_create.operator","enum":{"items":[{"value":"Equals"},{"value":"GreaterOrEquals"},{"value":"GreaterThan"},{"value":"LowerOrEquals"},{"value":"LowerThan"}]},"name":"operator","required":true,"type":"string"},{"arg":"@ThresholdRule_create.threshold","format":{"maxLength":100,"minLength":1},"name":"threshold","required":true,"type":"string"}],"type":"object"},{"arg":"$resource.properties.evaluationRules.dynamicDetectionRule","name":"dynamicDetectionRule","props":[{"arg":"$resource.properties.evaluationRules.dynamicDetectionRule.dynamicThresholdDirection","enum":{"items":[{"value":"GreaterOrLowerThan"},{"value":"GreaterThan"},{"value":"LowerThan"}]},"name":"dynamicThresholdDirection","required":true,"type":"string"},{"arg":"$resource.properties.evaluationRules.dynamicDetectionRule.dynamicThresholdModel","enum":{"items":[{"value":"AnomalyDetection"}]},"name":"dynamicThresholdModel","required":true,"type":"string"},{"arg":"$resource.properties.evaluationRules.dynamicDetectionRule.modelSensitivity","format":{"maximum":5.0,"minimum":0},"name":"modelSensitivity","required":true,"type":"float32"},{"arg":"$resource.properties.evaluationRules.dynamicDetectionRule.trainingStartTime","format":{"protocol":"iso"},"name":"trainingStartTime","type":"dateTime"}],"type":"object"},{"arg":"$resource.properties.evaluationRules.unhealthyRule","name":"unhealthyRule","type":"@ThresholdRule_create"}],"required":true,"type":"object"},{"additionalProps":{"item":{"format":{"maxLength":4096},"type":"string"}},"arg":"$resource.properties.labels","name":"labels","type":"object"},{"arg":"$resource.properties.refreshInterval","default":{"value":"PT1M"},"enum":{"items":[{"value":"PT10M"},{"value":"PT1H"},{"value":"PT1M"},{"value":"PT2H"},{"value":"PT30M"},{"value":"PT5M"}]},"name":"refreshInterval","type":"string"},{"enum":{"items":[{"arg":"$resource.properties.AzureResourceMetric","value":"AzureResourceMetric"},{"arg":"$resource.properties.LogAnalyticsQuery","value":"LogAnalyticsQuery"},{"arg":"$resource.properties.PrometheusMetricsQuery","value":"PrometheusMetricsQuery"}]},"name":"signalKind","required":true,"type":"string"}],"type":"object"}],"required":true,"type":"object"}}},"method":"put","path":{"params":[{"arg":"$Path.healthModelName","format":{"pattern":"^[a-zA-Z][a-zA-Z0-9-]{1,42}[a-zA-Z0-9]$"},"name":"healthModelName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","format":{"maxLength":90,"minLength":1},"name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.signalDefinitionName","format":{"pattern":"^[a-zA-Z0-9][a-zA-Z0-9-]{1,258}[a-zA-Z0-9]$"},"name":"signalDefinitionName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","name":"subscriptionId","required":true,"type":"uuid"}]},"query":{"consts":[{"const":true,"default":{"value":"2025-05-01-preview"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.CloudHealth/healthmodels/{}/signaldefinitions/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"name","readOnly":true,"type":"string"},{"discriminators":[{"property":"signalKind","props":[{"enum":{"items":[{"value":"Average"},{"value":"Count"},{"value":"Maximum"},{"value":"Minimum"},{"value":"None"},{"value":"Total"}]},"name":"aggregationType","required":true,"type":"string"},{"format":{"maxLength":256,"minLength":1},"name":"dimension","type":"string"},{"format":{"maxLength":256,"minLength":1},"name":"dimensionFilter","type":"string"},{"format":{"maxLength":256,"minLength":1},"name":"metricName","required":true,"type":"string"},{"format":{"maxLength":256,"minLength":1},"name":"metricNamespace","required":true,"type":"string"},{"format":{"maxLength":100,"minLength":1},"name":"timeGrain","required":true,"type":"string"}],"value":"AzureResourceMetric"},{"property":"signalKind","props":[{"format":{"maxLength":5000,"minLength":1},"name":"queryText","required":true,"type":"string"},{"format":{"maxLength":100,"minLength":1},"name":"timeGrain","type":"string"},{"format":{"maxLength":100,"minLength":1},"name":"valueColumnName","type":"string"}],"value":"LogAnalyticsQuery"},{"property":"signalKind","props":[{"format":{"maxLength":5000,"minLength":1},"name":"queryText","required":true,"type":"string"},{"format":{"maxLength":100,"minLength":1},"name":"timeGrain","type":"string"}],"value":"PrometheusMetricsQuery"}],"name":"properties","props":[{"format":{"maxLength":100,"minLength":1},"name":"dataUnit","type":"string"},{"format":{"protocol":"iso"},"name":"deletionDate","readOnly":true,"type":"dateTime"},{"format":{"maxLength":260,"minLength":1},"name":"displayName","type":"string"},{"name":"evaluationRules","props":[{"cls":"ThresholdRule_read","name":"degradedRule","props":[{"enum":{"items":[{"value":"Equals"},{"value":"GreaterOrEquals"},{"value":"GreaterThan"},{"value":"LowerOrEquals"},{"value":"LowerThan"}]},"name":"operator","required":true,"type":"string"},{"format":{"maxLength":100,"minLength":1},"name":"threshold","required":true,"type":"string"}],"type":"object"},{"name":"dynamicDetectionRule","props":[{"enum":{"items":[{"value":"GreaterOrLowerThan"},{"value":"GreaterThan"},{"value":"LowerThan"}]},"name":"dynamicThresholdDirection","required":true,"type":"string"},{"enum":{"items":[{"value":"AnomalyDetection"}]},"name":"dynamicThresholdModel","required":true,"type":"string"},{"format":{"maximum":5.0,"minimum":0},"name":"modelSensitivity","required":true,"type":"float32"},{"format":{"protocol":"iso"},"name":"trainingStartTime","type":"dateTime"}],"type":"object"},{"name":"unhealthyRule","type":"@ThresholdRule_read"}],"required":true,"type":"object"},{"additionalProps":{"item":{"format":{"maxLength":4096},"type":"string"}},"name":"labels","type":"object"},{"enum":{"items":[{"value":"Canceled"},{"value":"Creating"},{"value":"Deleting"},{"value":"Failed"},{"value":"Succeeded"}]},"name":"provisioningState","readOnly":true,"type":"string"},{"default":{"value":"PT1M"},"enum":{"items":[{"value":"PT10M"},{"value":"PT1H"},{"value":"PT1M"},{"value":"PT2H"},{"value":"PT30M"},{"value":"PT5M"}]},"name":"refreshInterval","type":"string"},{"enum":{"items":[{"value":"AzureResourceMetric"},{"value":"LogAnalyticsQuery"},{"value":"PrometheusMetricsQuery"}]},"name":"signalKind","required":true,"type":"string"}],"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"operationId":"SignalDefinitions_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.cloudhealth/healthmodels/{}/signaldefinitions/{}","plane":"mgmt-plane"}]}