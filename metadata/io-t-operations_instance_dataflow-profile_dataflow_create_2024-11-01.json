{"argGroups":[{"args":[{"format":{"maxLength":63,"minLength":3,"pattern":"^[a-z0-9][a-z0-9-]*[a-z0-9]$"},"help":{"short":"Name of Instance dataflowProfile dataflow resource"},"idPart":"child_name_2","options":["n","name","dataflow-name"],"required":true,"type":"string","var":"$Path.dataflowName"},{"format":{"maxLength":63,"minLength":3,"pattern":"^[a-z0-9][a-z0-9-]*[a-z0-9]$"},"help":{"short":"Name of Instance dataflowProfile resource"},"idPart":"child_name_1","options":["dataflow-profile-name"],"required":true,"type":"string","var":"$Path.dataflowProfileName"},{"format":{"maxLength":63,"minLength":3,"pattern":"^[a-z0-9][a-z0-9-]*[a-z0-9]$"},"help":{"short":"Name of instance."},"idPart":"name","options":["instance-name"],"required":true,"type":"string","var":"$Path.instanceName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"default":{"value":"Enabled"},"enum":{"items":[{"name":"Disabled","value":"Disabled"},{"name":"Enabled","value":"Enabled"}]},"group":"Properties","help":{"short":"Mode for Dataflow. Optional; defaults to Enabled."},"options":["mode"],"type":"string","var":"$resource.properties.mode"},{"group":"Properties","help":{"short":"List of operations including source and destination references as well as transformation."},"item":{"args":[{"args":[{"default":{"value":[]},"format":{"maxLength":1},"help":{"short":"Enrich data from Broker State Store. Dataset references a key in Broker State Store."},"item":{"args":[{"format":{"maxLength":256},"help":{"short":"A user provided optional description of the dataset."},"options":["description"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.datasets[].description"},{"help":{"short":"Condition to enrich data from Broker State Store. Example: $1 < 0 || $1 > $2 (Assuming inputs section $1 and $2 are provided)"},"options":["expression"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.datasets[].expression"},{"help":{"short":"List of fields for enriching from the Broker State Store."},"item":{"type":"string"},"options":["inputs"],"required":true,"type":"array<string>","var":"$resource.properties.operations[].builtInTransformationSettings.datasets[].inputs"},{"format":{"maxLength":64},"help":{"short":"The key of the dataset."},"options":["key"],"required":true,"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.datasets[].key"},{"help":{"short":"The reference to the schema that describes the dataset. Allowed: JSON Schema/draft-7."},"options":["schema-ref"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.datasets[].schemaRef"}],"type":"object"},"options":["datasets"],"type":"array<object>","var":"$resource.properties.operations[].builtInTransformationSettings.datasets"},{"default":{"value":[]},"help":{"short":"Filters input record or datapoints based on condition."},"item":{"args":[{"format":{"maxLength":256},"help":{"short":"A user provided optional description of the filter."},"options":["description"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.filter[].description"},{"help":{"short":"Condition to filter data. Can reference input fields with {n} where n is the index of the input field starting from 1. Example: $1 < 0 || $1 > $2 (Assuming inputs section $1 and $2 are provided)"},"options":["expression"],"required":true,"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.filter[].expression"},{"help":{"short":"List of fields for filtering in JSON path expression."},"item":{"type":"string"},"options":["inputs"],"required":true,"type":"array<string>","var":"$resource.properties.operations[].builtInTransformationSettings.filter[].inputs"},{"default":{"value":"Filter"},"enum":{"items":[{"name":"Filter","value":"Filter"}]},"help":{"short":"The type of dataflow operation."},"options":["type"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.filter[].type"}],"type":"object"},"options":["filter"],"type":"array<object>","var":"$resource.properties.operations[].builtInTransformationSettings.filter"},{"default":{"value":[]},"help":{"short":"Maps input to output message."},"item":{"args":[{"format":{"maxLength":256},"help":{"short":"A user provided optional description of the mapping function."},"options":["description"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.map[].description"},{"help":{"short":"Modify the inputs field(s) to the final output field. Example: $1 * 2.2 (Assuming inputs section $1 is provided)"},"options":["expression"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.map[].expression"},{"help":{"short":"List of fields for mapping in JSON path expression."},"item":{"type":"string"},"options":["inputs"],"required":true,"type":"array<string>","var":"$resource.properties.operations[].builtInTransformationSettings.map[].inputs"},{"help":{"short":"Where and how the input fields to be organized in the output record."},"options":["output"],"required":true,"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.map[].output"},{"enum":{"items":[{"name":"BuiltInFunction","value":"BuiltInFunction"},{"name":"Compute","value":"Compute"},{"name":"NewProperties","value":"NewProperties"},{"name":"PassThrough","value":"PassThrough"},{"name":"Rename","value":"Rename"}]},"help":{"short":"Type of transformation."},"options":["type"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.map[].type"}],"type":"object"},"options":["map"],"type":"array<object>","var":"$resource.properties.operations[].builtInTransformationSettings.map"},{"help":{"short":"Reference to the schema that describes the output of the transformation."},"options":["schema-ref"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.schemaRef"},{"default":{"value":"Json"},"enum":{"items":[{"name":"Delta","value":"Delta"},{"name":"Json","value":"Json"},{"name":"Parquet","value":"Parquet"}]},"help":{"short":"Serialization format. Optional; defaults to JSON. Allowed value JSON Schema/draft-7, Parquet. Default: Json"},"options":["serialization-format"],"type":"string","var":"$resource.properties.operations[].builtInTransformationSettings.serializationFormat"}],"help":{"short":"Built In Transformation configuration."},"options":["built-in-transformation-settings"],"type":"object","var":"$resource.properties.operations[].builtInTransformationSettings"},{"args":[{"format":{"minLength":1},"help":{"short":"Destination location, can be a topic or table name. Supports dynamic values with $topic, $systemProperties, $userProperties, $payload, $context, and $subscription."},"options":["data-destination"],"required":true,"type":"string","var":"$resource.properties.operations[].destinationSettings.dataDestination"},{"help":{"short":"Reference to the Endpoint CR. Can be of Broker, Kafka, Fabric, ADLS, ADX type."},"options":["endpoint-ref"],"required":true,"type":"string","var":"$resource.properties.operations[].destinationSettings.endpointRef"}],"help":{"short":"Destination configuration."},"options":["destination-settings"],"type":"object","var":"$resource.properties.operations[].destinationSettings"},{"format":{"maxLength":64},"help":{"short":"Optional user provided name of the transformation."},"options":["name"],"type":"string","var":"$resource.properties.operations[].name"},{"enum":{"items":[{"name":"BuiltInTransformation","value":"BuiltInTransformation"},{"name":"Destination","value":"Destination"},{"name":"Source","value":"Source"}]},"help":{"short":"Type of operation."},"options":["operation-type"],"required":true,"type":"string","var":"$resource.properties.operations[].operationType"},{"args":[{"help":{"short":"Reference to the resource in Azure Device Registry where the data in the endpoint originates from."},"options":["asset-ref"],"type":"string","var":"$resource.properties.operations[].sourceSettings.assetRef"},{"help":{"short":"List of source locations. Can be Broker or Kafka topics. Supports wildcards # and +."},"item":{"format":{"minLength":1},"type":"string"},"options":["data-sources"],"required":true,"type":"array<string>","var":"$resource.properties.operations[].sourceSettings.dataSources"},{"help":{"short":"Reference to the Dataflow Endpoint resource. Can only be of Broker and Kafka type."},"options":["endpoint-ref"],"required":true,"type":"string","var":"$resource.properties.operations[].sourceSettings.endpointRef"},{"help":{"short":"Schema CR reference. Data will be deserialized according to the schema, and dropped if it doesn't match."},"options":["schema-ref"],"type":"string","var":"$resource.properties.operations[].sourceSettings.schemaRef"},{"default":{"value":"Json"},"enum":{"items":[{"name":"Json","value":"Json"}]},"help":{"short":"Content is a JSON Schema. Allowed: JSON Schema/draft-7."},"options":["serialization-format"],"type":"string","var":"$resource.properties.operations[].sourceSettings.serializationFormat"}],"help":{"short":"Source configuration."},"options":["source-settings"],"type":"object","var":"$resource.properties.operations[].sourceSettings"}],"type":"object"},"options":["operations"],"type":"array<object>","var":"$resource.properties.operations"}],"name":"Properties"},{"args":[{"args":[{"help":{"short":"The name of the extended location."},"options":["name"],"required":true,"type":"string","var":"$resource.extendedLocation.name"},{"enum":{"items":[{"name":"CustomLocation","value":"CustomLocation"}]},"help":{"short":"Type of ExtendedLocation."},"options":["type"],"required":true,"type":"string","var":"$resource.extendedLocation.type"}],"group":"Resource","help":{"short":"Edge location of the resource."},"options":["extended-location"],"required":true,"type":"object","var":"$resource.extendedLocation"}],"name":"Resource"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.IoTOperations/instances/{instanceName}/dataflowProfiles/{dataflowProfileName}/dataflows/{dataflowName}","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"resource","props":[{"arg":"$resource.extendedLocation","name":"extendedLocation","props":[{"arg":"$resource.extendedLocation.name","name":"name","required":true,"type":"string"},{"arg":"$resource.extendedLocation.type","enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"name":"properties","props":[{"arg":"$resource.properties.mode","default":{"value":"Enabled"},"enum":{"items":[{"value":"Disabled"},{"value":"Enabled"}]},"name":"mode","type":"string"},{"arg":"$resource.properties.operations","item":{"props":[{"arg":"$resource.properties.operations[].builtInTransformationSettings","name":"builtInTransformationSettings","props":[{"arg":"$resource.properties.operations[].builtInTransformationSettings.datasets","default":{"value":[]},"format":{"maxLength":1},"item":{"props":[{"arg":"$resource.properties.operations[].builtInTransformationSettings.datasets[].description","format":{"maxLength":256},"name":"description","type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.datasets[].expression","name":"expression","type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.datasets[].inputs","item":{"type":"string"},"name":"inputs","required":true,"type":"array<string>"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.datasets[].key","format":{"maxLength":64},"name":"key","required":true,"type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.datasets[].schemaRef","name":"schemaRef","type":"string"}],"type":"object"},"name":"datasets","type":"array<object>"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.filter","default":{"value":[]},"item":{"props":[{"arg":"$resource.properties.operations[].builtInTransformationSettings.filter[].description","format":{"maxLength":256},"name":"description","type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.filter[].expression","name":"expression","required":true,"type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.filter[].inputs","item":{"type":"string"},"name":"inputs","required":true,"type":"array<string>"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.filter[].type","default":{"value":"Filter"},"enum":{"items":[{"value":"Filter"}]},"name":"type","type":"string"}],"type":"object"},"name":"filter","type":"array<object>"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.map","default":{"value":[]},"item":{"props":[{"arg":"$resource.properties.operations[].builtInTransformationSettings.map[].description","format":{"maxLength":256},"name":"description","type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.map[].expression","name":"expression","type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.map[].inputs","item":{"type":"string"},"name":"inputs","required":true,"type":"array<string>"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.map[].output","name":"output","required":true,"type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.map[].type","enum":{"items":[{"value":"BuiltInFunction"},{"value":"Compute"},{"value":"NewProperties"},{"value":"PassThrough"},{"value":"Rename"}]},"name":"type","type":"string"}],"type":"object"},"name":"map","type":"array<object>"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.schemaRef","name":"schemaRef","type":"string"},{"arg":"$resource.properties.operations[].builtInTransformationSettings.serializationFormat","default":{"value":"Json"},"enum":{"items":[{"value":"Delta"},{"value":"Json"},{"value":"Parquet"}]},"name":"serializationFormat","type":"string"}],"type":"object"},{"arg":"$resource.properties.operations[].destinationSettings","name":"destinationSettings","props":[{"arg":"$resource.properties.operations[].destinationSettings.dataDestination","format":{"minLength":1},"name":"dataDestination","required":true,"type":"string"},{"arg":"$resource.properties.operations[].destinationSettings.endpointRef","name":"endpointRef","required":true,"type":"string"}],"type":"object"},{"arg":"$resource.properties.operations[].name","format":{"maxLength":64},"name":"name","type":"string"},{"arg":"$resource.properties.operations[].operationType","enum":{"items":[{"value":"BuiltInTransformation"},{"value":"Destination"},{"value":"Source"}]},"name":"operationType","required":true,"type":"string"},{"arg":"$resource.properties.operations[].sourceSettings","name":"sourceSettings","props":[{"arg":"$resource.properties.operations[].sourceSettings.assetRef","name":"assetRef","type":"string"},{"arg":"$resource.properties.operations[].sourceSettings.dataSources","item":{"format":{"minLength":1},"type":"string"},"name":"dataSources","required":true,"type":"array<string>"},{"arg":"$resource.properties.operations[].sourceSettings.endpointRef","name":"endpointRef","required":true,"type":"string"},{"arg":"$resource.properties.operations[].sourceSettings.schemaRef","name":"schemaRef","type":"string"},{"arg":"$resource.properties.operations[].sourceSettings.serializationFormat","default":{"value":"Json"},"enum":{"items":[{"value":"Json"}]},"name":"serializationFormat","type":"string"}],"type":"object"}],"type":"object"},"name":"operations","required":true,"type":"array<object>"}],"type":"object"}],"required":true,"type":"object"}}},"method":"put","path":{"params":[{"arg":"$Path.dataflowName","format":{"maxLength":63,"minLength":3,"pattern":"^[a-z0-9][a-z0-9-]*[a-z0-9]$"},"name":"dataflowName","required":true,"type":"string"},{"arg":"$Path.dataflowProfileName","format":{"maxLength":63,"minLength":3,"pattern":"^[a-z0-9][a-z0-9-]*[a-z0-9]$"},"name":"dataflowProfileName","required":true,"type":"string"},{"arg":"$Path.instanceName","format":{"maxLength":63,"minLength":3,"pattern":"^[a-z0-9][a-z0-9-]*[a-z0-9]$"},"name":"instanceName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","format":{"maxLength":90,"minLength":1},"name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","name":"subscriptionId","required":true,"type":"uuid"}]},"query":{"consts":[{"const":true,"default":{"value":"2024-11-01"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"name":"extendedLocation","props":[{"name":"name","required":true,"type":"string"},{"enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.IoTOperations/instances/{}/dataflowProfiles/{}/dataflows/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"name","readOnly":true,"type":"string"},{"name":"properties","props":[{"default":{"value":"Enabled"},"enum":{"items":[{"value":"Disabled"},{"value":"Enabled"}]},"name":"mode","type":"string"},{"item":{"props":[{"name":"builtInTransformationSettings","props":[{"default":{"value":[]},"format":{"maxLength":1},"item":{"props":[{"format":{"maxLength":256},"name":"description","type":"string"},{"name":"expression","type":"string"},{"item":{"type":"string"},"name":"inputs","required":true,"type":"array<string>"},{"format":{"maxLength":64},"name":"key","required":true,"type":"string"},{"name":"schemaRef","type":"string"}],"type":"object"},"name":"datasets","type":"array<object>"},{"default":{"value":[]},"item":{"props":[{"format":{"maxLength":256},"name":"description","type":"string"},{"name":"expression","required":true,"type":"string"},{"item":{"type":"string"},"name":"inputs","required":true,"type":"array<string>"},{"default":{"value":"Filter"},"enum":{"items":[{"value":"Filter"}]},"name":"type","type":"string"}],"type":"object"},"name":"filter","type":"array<object>"},{"default":{"value":[]},"item":{"props":[{"format":{"maxLength":256},"name":"description","type":"string"},{"name":"expression","type":"string"},{"item":{"type":"string"},"name":"inputs","required":true,"type":"array<string>"},{"name":"output","required":true,"type":"string"},{"enum":{"items":[{"value":"BuiltInFunction"},{"value":"Compute"},{"value":"NewProperties"},{"value":"PassThrough"},{"value":"Rename"}]},"name":"type","type":"string"}],"type":"object"},"name":"map","type":"array<object>"},{"name":"schemaRef","type":"string"},{"default":{"value":"Json"},"enum":{"items":[{"value":"Delta"},{"value":"Json"},{"value":"Parquet"}]},"name":"serializationFormat","type":"string"}],"type":"object"},{"name":"destinationSettings","props":[{"format":{"minLength":1},"name":"dataDestination","required":true,"type":"string"},{"name":"endpointRef","required":true,"type":"string"}],"type":"object"},{"format":{"maxLength":64},"name":"name","type":"string"},{"enum":{"items":[{"value":"BuiltInTransformation"},{"value":"Destination"},{"value":"Source"}]},"name":"operationType","required":true,"type":"string"},{"name":"sourceSettings","props":[{"name":"assetRef","type":"string"},{"item":{"format":{"minLength":1},"type":"string"},"name":"dataSources","required":true,"type":"array<string>"},{"name":"endpointRef","required":true,"type":"string"},{"name":"schemaRef","type":"string"},{"default":{"value":"Json"},"enum":{"items":[{"value":"Json"}]},"name":"serializationFormat","type":"string"}],"type":"object"}],"type":"object"},"name":"operations","required":true,"type":"array<object>"},{"enum":{"items":[{"value":"Accepted"},{"value":"Canceled"},{"value":"Deleting"},{"value":"Failed"},{"value":"Provisioning"},{"value":"Succeeded"},{"value":"Updating"}]},"name":"provisioningState","readOnly":true,"type":"string"}],"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"longRunning":{"finalStateVia":"azure-async-operation"},"operationId":"Dataflow_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.iotoperations/instances/{}/dataflowprofiles/{}/dataflows/{}","plane":"mgmt-plane"}]}