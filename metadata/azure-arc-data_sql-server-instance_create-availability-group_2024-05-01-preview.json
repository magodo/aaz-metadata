{"argGroups":[{"args":[{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"help":{"short":"Name of SQL Server Instance"},"idPart":"name","options":["sql-server-instance-name"],"required":true,"type":"string","var":"$Path.sqlServerInstanceName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"enum":{"items":[{"name":"NONE","value":"NONE"},{"name":"PRIMARY","value":"PRIMARY"},{"name":"SECONDARY","value":"SECONDARY"},{"name":"SECONDARY_ONLY","value":"SECONDARY_ONLY"}]},"group":"CreateAgConfiguration","help":{"short":"Preferred replica for running automated backups."},"options":["automated-backup-preference"],"type":"string","var":"$createAgConfiguration.automatedBackupPreference"},{"group":"CreateAgConfiguration","help":{"short":"Name of the availability group."},"options":["availability-group-name"],"type":"string","var":"$createAgConfiguration.availabilityGroupName"},{"enum":{"items":[{"name":"NONE","value":"NONE"},{"name":"WSFC","value":"WSFC"}]},"group":"CreateAgConfiguration","help":{"short":"Set to WSFC when availability group is on a failover cluster instance on a Windows Server failover cluster. Set to NONE when availability group not using WSFC for cluster coordination."},"options":["cluster-type"],"type":"string","var":"$createAgConfiguration.clusterType"},{"group":"CreateAgConfiguration","help":{"short":"List of databases to include in the availability group."},"item":{"type":"string"},"options":["databases"],"type":"array<string>","var":"$createAgConfiguration.databases"},{"enum":{"items":[{"name":"OFF","value":"OFF"},{"name":"ON","value":"ON"}]},"group":"CreateAgConfiguration","help":{"short":"Specifies whether the availability group supports failover for database health conditions."},"options":["db-failover"],"type":"string","var":"$createAgConfiguration.dbFailover"},{"enum":{"items":[{"name":"NONE","value":"NONE"},{"name":"PER_DB","value":"PER_DB"}]},"group":"CreateAgConfiguration","help":{"short":"Specifies whether DTC support has been enabled for this availability group."},"options":["dtc-support"],"type":"string","var":"$createAgConfiguration.dtcSupport"},{"enum":{"items":[{"name":"1","value":1},{"name":"2","value":2},{"name":"3","value":3},{"name":"4","value":4},{"name":"5","value":5}]},"group":"CreateAgConfiguration","help":{"short":"User-defined failure condition level under which an automatic failover must be triggered."},"options":["failure-condition-level"],"type":"integer32","var":"$createAgConfiguration.failureConditionLevel"},{"group":"CreateAgConfiguration","help":{"short":"Wait time (in milliseconds) for the sp_server_diagnostics system stored procedure to return server-health information, before the server instance is assumed to be slow or not responding."},"options":["health-check-timeout"],"type":"integer32","var":"$createAgConfiguration.healthCheckTimeout"},{"args":[{"help":{"short":"the DNS name for the listener."},"options":["dns-name"],"type":"string","var":"$createAgConfiguration.listener.dnsName"},{"help":{"short":"IP V4 Addresses and masks for the listener."},"item":{"args":[{"help":{"short":"IPV4 address"},"options":["ip-address"],"type":"string","var":"$createAgConfiguration.listener.ipV4AddressesAndMasks[].ipAddress"},{"help":{"short":"IPV4 netmask"},"options":["mask"],"type":"string","var":"$createAgConfiguration.listener.ipV4AddressesAndMasks[].mask"}],"type":"object"},"options":["ip-v4-addresses-and-masks"],"type":"array<object>","var":"$createAgConfiguration.listener.ipV4AddressesAndMasks"},{"help":{"short":"IP V6 Addresses for the listener"},"item":{"type":"string"},"options":["ip-v6-addresses"],"type":"array<string>","var":"$createAgConfiguration.listener.ipV6Addresses"},{"help":{"short":"Network port for the listener. Default is 1433."},"options":["port"],"type":"integer32","var":"$createAgConfiguration.listener.port"}],"group":"CreateAgConfiguration","help":{"short":"The listener for the sql server availability group"},"options":["listener"],"type":"object","var":"$createAgConfiguration.listener"},{"group":"CreateAgConfiguration","help":{"short":"List of availability group replicas."},"item":{"args":[{"enum":{"items":[{"name":"ASYNCHRONOUS_COMMIT","value":"ASYNCHRONOUS_COMMIT"},{"name":"SYNCHRONOUS_COMMIT","value":"SYNCHRONOUS_COMMIT"}]},"help":{"short":"Property that determines whether a given availability replica can run in synchronous-commit mode"},"options":["availability-mode"],"type":"string","var":"$createAgConfiguration.replicas[].availabilityMode"},{"help":{"short":"Represents the user-specified priority for performing backups on this replica relative to the other replicas in the same availability group."},"options":["backup-priority"],"type":"integer32","var":"$createAgConfiguration.replicas[].backupPriority"},{"help":{"short":"Name of certificate to use for authentication. Required if any CERTIFICATE authentication modes are specified."},"options":["certificate-name"],"type":"string","var":"$createAgConfiguration.replicas[].certificateName"},{"enum":{"items":[{"name":"Certificate","value":"Certificate"},{"name":"Certificate_Windows_Kerberos","value":"Certificate_Windows_Kerberos"},{"name":"Certificate_Windows_NTLM","value":"Certificate_Windows_NTLM"},{"name":"Certificate_Windows_Negotiate","value":"Certificate_Windows_Negotiate"},{"name":"Windows_Kerberos","value":"Windows_Kerberos"},{"name":"Windows_Kerberos_Certificate","value":"Windows_Kerberos_Certificate"},{"name":"Windows_NTLM","value":"Windows_NTLM"},{"name":"Windows_NTLM_Certificate","value":"Windows_NTLM_Certificate"},{"name":"Windows_Negotiate","value":"Windows_Negotiate"},{"name":"Windows_Negotiate_Certificate","value":"Windows_Negotiate_Certificate"}]},"help":{"short":"Permitted authentication modes for the mirroring endpoint."},"options":["endpoint-authentication-mode"],"type":"string","var":"$createAgConfiguration.replicas[].endpointAuthenticationMode"},{"help":{"short":"The login which will connect to the mirroring endpoint"},"options":["endpoint-connect-login"],"type":"string","var":"$createAgConfiguration.replicas[].endpointConnectLogin"},{"help":{"short":"Name of the database mirroring endpoint URL for the availability group replica"},"options":["endpoint-name"],"type":"string","var":"$createAgConfiguration.replicas[].endpointName"},{"help":{"short":"Database mirroring endpoint URL of availability group replica"},"options":["endpoint-url"],"type":"string","var":"$createAgConfiguration.replicas[].endpointUrl"},{"enum":{"items":[{"name":"AUTOMATIC","value":"AUTOMATIC"},{"name":"EXTERNAL","value":"EXTERNAL"},{"name":"MANUAL","value":"MANUAL"}]},"help":{"short":"Property to set the failover mode of the availability group replica"},"options":["failover-mode"],"type":"string","var":"$createAgConfiguration.replicas[].failoverMode"},{"enum":{"items":[{"name":"ALL","value":"ALL"},{"name":"READ_WRITE","value":"READ_WRITE"}]},"help":{"short":"Whether the primary replica should allow all connections or only READ_WRITE connections (disallowing ReadOnly connections)"},"options":["primary-role-allow-connections"],"type":"string","var":"$createAgConfiguration.replicas[].primaryRoleAllowConnections"},{"help":{"short":"List of read only routing URLs."},"item":{"type":"string"},"options":["primary-role-read-only-routing-list"],"type":"array<string>","var":"$createAgConfiguration.replicas[].primaryRoleReadOnlyRoutingList"},{"enum":{"items":[{"name":"ALL","value":"ALL"},{"name":"NO","value":"NO"},{"name":"READ_ONLY","value":"READ_ONLY"}]},"help":{"short":"Whether the secondary replica should allow all connections, no connections, or only ReadOnly connections."},"options":["secondary-role-allow-connections"],"type":"string","var":"$createAgConfiguration.replicas[].secondaryRoleAllowConnections"},{"help":{"short":"Connectivity endpoint (URL) of the read only availability replica."},"options":["secondary-role-read-only-routing-url"],"type":"string","var":"$createAgConfiguration.replicas[].secondaryRoleReadOnlyRoutingUrl"},{"enum":{"items":[{"name":"AUTOMATIC","value":"AUTOMATIC"},{"name":"MANUAL","value":"MANUAL"}]},"help":{"short":"Specifies how the secondary replica will be initially seeded. AUTOMATIC enables direct seeding. This method will seed the secondary replica over the network. This method does not require you to backup and restore a copy of the primary database on the replica. MANUAL specifies manual seeding (default). This method requires you to create a backup of the database on the primary replica and manually restore that backup on the secondary replica."},"options":["seeding-mode"],"type":"string","var":"$createAgConfiguration.replicas[].seedingMode"},{"help":{"short":"the server instance hosting the replica."},"options":["server-instance"],"type":"string","var":"$createAgConfiguration.replicas[].serverInstance"},{"help":{"short":"The time-out period of availability group session replica, in seconds."},"options":["session-timeout"],"type":"integer32","var":"$createAgConfiguration.replicas[].sessionTimeout"}],"type":"object"},"options":["replicas"],"type":"array<object>","var":"$createAgConfiguration.replicas"},{"group":"CreateAgConfiguration","help":{"short":"The number of secondary replicas that must be in a synchronized state for a commit to complete."},"options":["required-synchronized-secondaries-to-commit"],"type":"integer32","var":"$createAgConfiguration.requiredSynchronizedSecondariesToCommit"}],"name":"CreateAgConfiguration"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.AzureArcData/sqlServerInstances/{sqlServerInstanceName}/createAvailabilityGroup","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"createAgConfiguration","props":[{"arg":"$createAgConfiguration.automatedBackupPreference","enum":{"items":[{"value":"NONE"},{"value":"PRIMARY"},{"value":"SECONDARY"},{"value":"SECONDARY_ONLY"}]},"name":"automatedBackupPreference","type":"string"},{"arg":"$createAgConfiguration.availabilityGroupName","name":"availabilityGroupName","type":"string"},{"arg":"$createAgConfiguration.clusterType","enum":{"items":[{"value":"NONE"},{"value":"WSFC"}]},"name":"clusterType","type":"string"},{"arg":"$createAgConfiguration.databases","item":{"type":"string"},"name":"databases","type":"array<string>"},{"arg":"$createAgConfiguration.dbFailover","enum":{"items":[{"value":"OFF"},{"value":"ON"}]},"name":"dbFailover","type":"string"},{"arg":"$createAgConfiguration.dtcSupport","enum":{"items":[{"value":"NONE"},{"value":"PER_DB"}]},"name":"dtcSupport","type":"string"},{"arg":"$createAgConfiguration.failureConditionLevel","enum":{"items":[{"value":1},{"value":2},{"value":3},{"value":4},{"value":5}]},"name":"failureConditionLevel","type":"integer32"},{"arg":"$createAgConfiguration.healthCheckTimeout","name":"healthCheckTimeout","type":"integer32"},{"arg":"$createAgConfiguration.listener","name":"listener","props":[{"arg":"$createAgConfiguration.listener.dnsName","name":"dnsName","type":"string"},{"arg":"$createAgConfiguration.listener.ipV4AddressesAndMasks","identifiers":["ipAddress"],"item":{"props":[{"arg":"$createAgConfiguration.listener.ipV4AddressesAndMasks[].ipAddress","name":"ipAddress","type":"string"},{"arg":"$createAgConfiguration.listener.ipV4AddressesAndMasks[].mask","name":"mask","type":"string"}],"type":"object"},"name":"ipV4AddressesAndMasks","type":"array<object>"},{"arg":"$createAgConfiguration.listener.ipV6Addresses","item":{"type":"string"},"name":"ipV6Addresses","type":"array<string>"},{"arg":"$createAgConfiguration.listener.port","name":"port","type":"integer32"}],"type":"object"},{"arg":"$createAgConfiguration.replicas","identifiers":["serverInstance"],"item":{"props":[{"arg":"$createAgConfiguration.replicas[].availabilityMode","enum":{"items":[{"value":"ASYNCHRONOUS_COMMIT"},{"value":"SYNCHRONOUS_COMMIT"}]},"name":"availabilityMode","type":"string"},{"arg":"$createAgConfiguration.replicas[].backupPriority","name":"backupPriority","type":"integer32"},{"arg":"$createAgConfiguration.replicas[].certificateName","name":"certificateName","type":"string"},{"arg":"$createAgConfiguration.replicas[].endpointAuthenticationMode","enum":{"items":[{"value":"Certificate"},{"value":"Certificate_Windows_Kerberos"},{"value":"Certificate_Windows_NTLM"},{"value":"Certificate_Windows_Negotiate"},{"value":"Windows_Kerberos"},{"value":"Windows_Kerberos_Certificate"},{"value":"Windows_NTLM"},{"value":"Windows_NTLM_Certificate"},{"value":"Windows_Negotiate"},{"value":"Windows_Negotiate_Certificate"}]},"name":"endpointAuthenticationMode","type":"string"},{"arg":"$createAgConfiguration.replicas[].endpointConnectLogin","name":"endpointConnectLogin","type":"string"},{"arg":"$createAgConfiguration.replicas[].endpointName","name":"endpointName","type":"string"},{"arg":"$createAgConfiguration.replicas[].endpointUrl","name":"endpointUrl","type":"string"},{"arg":"$createAgConfiguration.replicas[].failoverMode","enum":{"items":[{"value":"AUTOMATIC"},{"value":"EXTERNAL"},{"value":"MANUAL"}]},"name":"failoverMode","type":"string"},{"arg":"$createAgConfiguration.replicas[].primaryRoleAllowConnections","enum":{"items":[{"value":"ALL"},{"value":"READ_WRITE"}]},"name":"primaryRoleAllowConnections","type":"string"},{"arg":"$createAgConfiguration.replicas[].primaryRoleReadOnlyRoutingList","item":{"type":"string"},"name":"primaryRoleReadOnlyRoutingList","type":"array<string>"},{"arg":"$createAgConfiguration.replicas[].secondaryRoleAllowConnections","enum":{"items":[{"value":"ALL"},{"value":"NO"},{"value":"READ_ONLY"}]},"name":"secondaryRoleAllowConnections","type":"string"},{"arg":"$createAgConfiguration.replicas[].secondaryRoleReadOnlyRoutingUrl","name":"secondaryRoleReadOnlyRoutingUrl","type":"string"},{"arg":"$createAgConfiguration.replicas[].seedingMode","enum":{"items":[{"value":"AUTOMATIC"},{"value":"MANUAL"}]},"name":"seedingMode","type":"string"},{"arg":"$createAgConfiguration.replicas[].serverInstance","name":"serverInstance","type":"string"},{"arg":"$createAgConfiguration.replicas[].sessionTimeout","name":"sessionTimeout","type":"integer32"}],"type":"object"},"name":"replicas","type":"array<object>"},{"arg":"$createAgConfiguration.requiredSynchronizedSecondariesToCommit","name":"requiredSynchronizedSecondariesToCommit","type":"integer32"}],"required":true,"type":"object"}}},"method":"post","path":{"params":[{"arg":"$Path.resourceGroupName","name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.sqlServerInstanceName","name":"sqlServerInstanceName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","name":"subscriptionId","required":true,"type":"uuid"}]},"query":{"consts":[{"const":true,"default":{"value":"2024-05-01-preview"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.AzureArcData/sqlServerInstances/{}/availabilityGroups/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"location","required":true,"type":"ResourceLocation"},{"name":"name","readOnly":true,"type":"string"},{"name":"properties","props":[{"format":{"pattern":"^[A-Za-z0-9]{8}-([A-Za-z0-9]{4}-){3}[A-Za-z0-9]{12}$"},"name":"availabilityGroupId","readOnly":true,"type":"string"},{"format":{"protocol":"iso"},"name":"collectionTimestamp","readOnly":true,"type":"dateTime"},{"name":"databases","props":[{"name":"nextLink","readOnly":true,"type":"string"},{"item":{"props":[{"name":"databaseName","type":"string"},{"name":"databaseStateDescription","readOnly":true,"type":"string"},{"name":"isCommitParticipant","readOnly":true,"type":"boolean"},{"name":"isLocal","readOnly":true,"type":"boolean"},{"name":"isPrimaryReplica","readOnly":true,"type":"boolean"},{"name":"isSuspended","readOnly":true,"type":"boolean"},{"name":"replicaName","readOnly":true,"type":"string"},{"name":"suspendReasonDescription","readOnly":true,"type":"string"},{"name":"synchronizationHealthDescription","readOnly":true,"type":"string"},{"name":"synchronizationStateDescription","readOnly":true,"type":"string"}],"type":"object"},"name":"value","type":"array<object>"}],"type":"object"},{"name":"info","props":[{"name":"automatedBackupPreferenceDescription","readOnly":true,"type":"string"},{"name":"basicFeatures","type":"boolean"},{"name":"clusterTypeDescription","readOnly":true,"type":"string"},{"name":"dbFailover","type":"boolean"},{"name":"dtcSupport","type":"boolean"},{"name":"failureConditionLevel","type":"integer32"},{"name":"healthCheckTimeout","type":"integer32"},{"name":"isContained","type":"boolean"},{"name":"isDistributed","type":"boolean"},{"name":"listener","props":[{"name":"dnsName","type":"string"},{"identifiers":["ipAddress"],"item":{"props":[{"name":"ipAddress","type":"string"},{"name":"mask","type":"string"}],"type":"object"},"name":"ipV4AddressesAndMasks","type":"array<object>"},{"item":{"type":"string"},"name":"ipV6Addresses","type":"array<string>"},{"name":"port","type":"integer32"}],"type":"object"},{"name":"primaryRecoveryHealthDescription","readOnly":true,"type":"string"},{"name":"primaryReplica","readOnly":true,"type":"string"},{"enum":{"items":[{"value":"AzureSQLManagedInstance"},{"value":"AzureSQLVM"},{"value":"SQLServer"},{"value":"Unknown"}]},"name":"replicationPartnerType","readOnly":true,"type":"string"},{"name":"requiredSynchronizedSecondariesToCommit","type":"integer32"},{"name":"secondaryRecoveryHealthDescription","readOnly":true,"type":"string"},{"name":"synchronizationHealthDescription","readOnly":true,"type":"string"},{"name":"version","readOnly":true,"type":"integer32"}],"type":"object"},{"name":"instanceName","readOnly":true,"type":"string"},{"name":"provisioningState","readOnly":true,"type":"string"},{"name":"replicas","props":[{"name":"nextLink","readOnly":true,"type":"string"},{"item":{"props":[{"name":"configure","props":[{"enum":{"items":[{"value":"ASYNCHRONOUS_COMMIT"},{"value":"SYNCHRONOUS_COMMIT"}]},"name":"availabilityMode","type":"string"},{"name":"availabilityModeDescription","readOnly":true,"type":"string"},{"name":"backupPriority","type":"integer32"},{"name":"certificateName","type":"string"},{"enum":{"items":[{"value":"Certificate"},{"value":"Certificate_Windows_Kerberos"},{"value":"Certificate_Windows_NTLM"},{"value":"Certificate_Windows_Negotiate"},{"value":"Windows_Kerberos"},{"value":"Windows_Kerberos_Certificate"},{"value":"Windows_NTLM"},{"value":"Windows_NTLM_Certificate"},{"value":"Windows_Negotiate"},{"value":"Windows_Negotiate_Certificate"}]},"name":"endpointAuthenticationMode","type":"string"},{"name":"endpointConnectLogin","type":"string"},{"name":"endpointName","type":"string"},{"name":"endpointUrl","type":"string"},{"enum":{"items":[{"value":"AUTOMATIC"},{"value":"EXTERNAL"},{"value":"MANUAL"}]},"name":"failoverMode","type":"string"},{"name":"failoverModeDescription","readOnly":true,"type":"string"},{"enum":{"items":[{"value":"ALL"},{"value":"READ_WRITE"}]},"name":"primaryAllowConnections","type":"string"},{"name":"primaryRoleAllowConnectionsDescription","readOnly":true,"type":"string"},{"name":"readOnlyRoutingUrl","type":"string"},{"name":"readWriteRoutingUrl","type":"string"},{"format":{"protocol":"iso"},"name":"replicaCreateDate","readOnly":true,"type":"dateTime"},{"format":{"protocol":"iso"},"name":"replicaModifyDate","readOnly":true,"type":"dateTime"},{"enum":{"items":[{"value":"ALL"},{"value":"NO"},{"value":"READ_ONLY"}]},"name":"secondaryAllowConnections","type":"string"},{"name":"secondaryRoleAllowConnectionsDescription","readOnly":true,"type":"string"},{"enum":{"items":[{"value":"AUTOMATIC"},{"value":"MANUAL"}]},"name":"seedingMode","type":"string"},{"name":"seedingModeDescription","readOnly":true,"type":"string"},{"name":"sessionTimeout","type":"integer32"}],"type":"object"},{"format":{"pattern":"^[A-Za-z0-9]{8}-([A-Za-z0-9]{4}-){3}[A-Za-z0-9]{12}$"},"name":"replicaId","readOnly":true,"type":"string"},{"name":"replicaName","type":"string"},{"name":"state","props":[{"name":"availabilityGroupReplicaRole","readOnly":true,"type":"string"},{"name":"connectedStateDescription","readOnly":true,"type":"string"},{"name":"lastConnectErrorDescription","readOnly":true,"type":"string"},{"format":{"protocol":"iso"},"name":"lastConnectErrorTimestamp","readOnly":true,"type":"dateTime"},{"name":"operationalStateDescription","readOnly":true,"type":"string"},{"name":"recoveryHealthDescription","readOnly":true,"type":"string"},{"name":"synchronizationHealthDescription","readOnly":true,"type":"string"}],"type":"object"}],"type":"object"},"name":"value","type":"array<object>"}],"type":"object"},{"name":"serverName","readOnly":true,"type":"string"}],"required":true,"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"additionalProps":{"item":{"type":"string"}},"name":"tags","type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200]},{"header":{"items":[{"name":"Location"}]},"statusCode":[202]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"longRunning":{"finalStateVia":"azure-async-operation"},"operationId":"SqlServerAvailabilityGroups_CreateAvailabilityGroup"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.azurearcdata/sqlserverinstances/{}/createavailabilitygroup","plane":"mgmt-plane"}]}