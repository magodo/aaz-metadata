{"argGroups":[{"args":[{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ broker resource"},"idPart":"child_name_1","options":["broker-name"],"required":true,"type":"string","var":"$Path.brokerName"},{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ broker/listener resource"},"idPart":"child_name_2","options":["n","name","listener-name"],"required":true,"type":"string","var":"$Path.listenerName"},{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ resource"},"idPart":"name","options":["mq-name"],"required":true,"type":"string","var":"$Path.mqName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"default":{"value":false},"group":"Properties","help":{"short":"The flag for enabling Authentication rules on Listener Port."},"options":["authentication-enabled"],"type":"boolean","var":"$resource.properties.authenticationEnabled"},{"default":{"value":false},"group":"Properties","help":{"short":"The flag for enabling Authorization policies on Listener Port. false - AllowAll, true - Use Authorization resource rules if present."},"options":["authorization-enabled"],"type":"boolean","var":"$resource.properties.authorizationEnabled"},{"group":"Properties","help":{"short":"The k8s cr/resource reference of mq/broker."},"options":["broker-ref"],"type":"string","var":"$resource.properties.brokerRef"},{"format":{"maximum":65535,"minimum":0},"group":"Properties","help":{"short":"The node port to use on the Host node."},"options":["node-port"],"type":"integer32","var":"$resource.properties.nodePort"},{"format":{"maximum":65535,"minimum":0},"group":"Properties","help":{"short":"The port to start Listening for connections on."},"options":["port"],"type":"integer32","var":"$resource.properties.port"},{"default":{"value":"aio-mq-dmqtt-frontend"},"group":"Properties","help":{"short":"The service name to expose Listener port on."},"options":["service-name"],"type":"string","var":"$resource.properties.serviceName"},{"default":{"value":"clusterIp"},"enum":{"items":[{"name":"clusterIp","value":"clusterIp"},{"name":"loadBalancer","value":"loadBalancer"},{"name":"nodePort","value":"nodePort"}]},"group":"Properties","help":{"short":"The Kubernetes Service type to deploy for Listener."},"options":["service-type"],"type":"string","var":"$resource.properties.serviceType"},{"args":[{"args":[{"default":{"value":"720h"},"help":{"short":"Lifetime of automatically-managed certificate."},"options":["duration"],"type":"string","var":"$resource.properties.tls.automatic.duration"},{"args":[{"default":{"value":"cert-manager.io"},"help":{"short":"group of issuer."},"options":["group"],"required":true,"type":"string","var":"$resource.properties.tls.automatic.issuerRef.group"},{"help":{"short":"kind of issuer (Issuer or ClusterIssuer)."},"options":["kind"],"required":true,"type":"string","var":"$resource.properties.tls.automatic.issuerRef.kind"},{"help":{"short":"name of issuer."},"options":["name"],"required":true,"type":"string","var":"$resource.properties.tls.automatic.issuerRef.name"}],"help":{"short":"cert-manager issuerRef."},"options":["issuer-ref"],"required":true,"type":"object","var":"$resource.properties.tls.automatic.issuerRef"},{"args":[{"default":{"value":"ECDSA"},"help":{"short":"algorithm for private key."},"options":["algorithm"],"required":true,"type":"string","var":"$resource.properties.tls.automatic.privateKey.algorithm"},{"default":{"value":"Always"},"help":{"short":"cert-manager rotationPolicy."},"options":["rotation-policy"],"required":true,"type":"string","var":"$resource.properties.tls.automatic.privateKey.rotationPolicy"},{"default":{"value":256},"format":{"maximum":65535,"minimum":0},"help":{"short":"size of private key."},"options":["size"],"required":true,"type":"integer32","var":"$resource.properties.tls.automatic.privateKey.size"}],"help":{"short":"Cert Manager private key."},"options":["private-key"],"type":"object","var":"$resource.properties.tls.automatic.privateKey"},{"default":{"value":"240h"},"help":{"short":"When to begin renewing automatically-managed certificate."},"options":["renew-before"],"type":"string","var":"$resource.properties.tls.automatic.renewBefore"},{"args":[{"default":{"value":[]},"help":{"short":"DNS SANs."},"item":{"type":"string"},"options":["dns"],"required":true,"type":"array<string>","var":"$resource.properties.tls.automatic.san.dns"},{"default":{"value":[]},"help":{"short":"IP address SANs."},"item":{"type":"string"},"options":["ip"],"required":true,"type":"array<string>","var":"$resource.properties.tls.automatic.san.ip"}],"help":{"short":"Additional SANs to include in the certificate."},"options":["san"],"type":"object","var":"$resource.properties.tls.automatic.san"},{"help":{"short":"Secret for storing server certificate. Any existing data will be overwritten."},"options":["secret-name"],"type":"string","var":"$resource.properties.tls.automatic.secretName"},{"help":{"short":"Certificate K8S namespace. Omit to use default namespace."},"options":["secret-namespace"],"type":"string","var":"$resource.properties.tls.automatic.secretNamespace"}],"help":{"short":"Option 1 - Automatic TLS server certificate management with cert-manager."},"options":["automatic"],"type":"object","var":"$resource.properties.tls.automatic"},{"args":[{"args":[{"args":[{"help":{"short":"KeyVault service principal local secret name."},"options":["service-principal-local-secret-name"],"required":true,"type":"string","var":"$resource.properties.tls.keyVault.vault.credentials.servicePrincipalLocalSecretName"}],"help":{"short":"KeyVault credentials."},"options":["credentials"],"required":true,"type":"object","var":"$resource.properties.tls.keyVault.vault.credentials"},{"help":{"short":"KeyVault directoryId."},"options":["directory-id"],"required":true,"type":"string","var":"$resource.properties.tls.keyVault.vault.directoryId"},{"help":{"short":"KeyVault name."},"options":["name"],"required":true,"type":"string","var":"$resource.properties.tls.keyVault.vault.name"}],"help":{"short":"KeyVault properties."},"options":["vault"],"required":true,"type":"object","var":"$resource.properties.tls.keyVault.vault"},{"args":[{"help":{"short":"KeyVault secret name."},"options":["name"],"required":true,"type":"string","var":"@KeyVaultSecretObject_create.name"},{"help":{"short":"KeyVault secret version."},"options":["version"],"type":"string","var":"@KeyVaultSecretObject_create.version"}],"cls":"KeyVaultSecretObject_create","help":{"short":"KeyVault CA chain secret details."},"options":["vault-ca-chain-secret"],"type":"object","var":"$resource.properties.tls.keyVault.vaultCaChainSecret"},{"help":{"short":"KeyVault Cert secret details."},"options":["vault-cert"],"required":true,"type":"@KeyVaultSecretObject_create","var":"$resource.properties.tls.keyVault.vaultCert"}],"help":{"short":"Option 3 - TLS server certificate retrieved from Key Vault.."},"options":["key-vault"],"type":"object","var":"$resource.properties.tls.keyVault"},{"args":[{"help":{"short":"secret containing TLS cert."},"options":["secret-name"],"required":true,"type":"string","var":"$resource.properties.tls.manual.secretName"},{"help":{"short":"namespace of secret; omit to use default namespace."},"options":["secret-namespace"],"type":"string","var":"$resource.properties.tls.manual.secretNamespace"}],"help":{"short":"Option 2 - Manual TLS server certificate management through a defined secret."},"options":["manual"],"type":"object","var":"$resource.properties.tls.manual"}],"group":"Properties","help":{"short":"Defines configuration of a TLS server certificate. NOTE Enum - Only one TLS Cert method is supported"},"options":["tls"],"type":"object","var":"$resource.properties.tls"}],"name":"Properties"},{"args":[{"args":[{"help":{"short":"The name of the extended location."},"options":["name"],"required":true,"type":"string","var":"$resource.extendedLocation.name"},{"enum":{"items":[{"name":"CustomLocation","value":"CustomLocation"}]},"help":{"short":"Type of ExtendedLocation."},"options":["type"],"required":true,"type":"string","var":"$resource.extendedLocation.type"}],"group":"Resource","help":{"short":"Extended Location"},"options":["extended-location"],"required":true,"type":"object","var":"$resource.extendedLocation"},{"group":"Resource","help":{"short":"The geo-location where the resource lives"},"options":["l","location"],"required":true,"type":"ResourceLocation","var":"$resource.location"},{"additionalProps":{"item":{"type":"string"}},"group":"Resource","help":{"short":"Resource tags."},"options":["tags"],"type":"object","var":"$resource.tags"}],"name":"Resource"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.IoTOperationsMQ/mq/{mqName}/broker/{brokerName}/listener/{listenerName}","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"resource","props":[{"arg":"$resource.extendedLocation","name":"extendedLocation","props":[{"arg":"$resource.extendedLocation.name","name":"name","required":true,"type":"string"},{"arg":"$resource.extendedLocation.type","enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.location","name":"location","required":true,"type":"ResourceLocation"},{"clientFlatten":true,"name":"properties","props":[{"arg":"$resource.properties.authenticationEnabled","default":{"value":false},"name":"authenticationEnabled","type":"boolean"},{"arg":"$resource.properties.authorizationEnabled","default":{"value":false},"name":"authorizationEnabled","type":"boolean"},{"arg":"$resource.properties.brokerRef","name":"brokerRef","required":true,"type":"string"},{"arg":"$resource.properties.nodePort","format":{"maximum":65535,"minimum":0},"name":"nodePort","type":"integer32"},{"arg":"$resource.properties.port","format":{"maximum":65535,"minimum":0},"name":"port","required":true,"type":"integer32"},{"arg":"$resource.properties.serviceName","default":{"value":"aio-mq-dmqtt-frontend"},"name":"serviceName","type":"string"},{"arg":"$resource.properties.serviceType","default":{"value":"clusterIp"},"enum":{"items":[{"value":"clusterIp"},{"value":"loadBalancer"},{"value":"nodePort"}]},"name":"serviceType","type":"string"},{"arg":"$resource.properties.tls","name":"tls","props":[{"arg":"$resource.properties.tls.automatic","name":"automatic","props":[{"arg":"$resource.properties.tls.automatic.duration","default":{"value":"720h"},"name":"duration","type":"string"},{"arg":"$resource.properties.tls.automatic.issuerRef","name":"issuerRef","props":[{"arg":"$resource.properties.tls.automatic.issuerRef.group","default":{"value":"cert-manager.io"},"name":"group","required":true,"type":"string"},{"arg":"$resource.properties.tls.automatic.issuerRef.kind","name":"kind","required":true,"type":"string"},{"arg":"$resource.properties.tls.automatic.issuerRef.name","name":"name","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.properties.tls.automatic.privateKey","name":"privateKey","props":[{"arg":"$resource.properties.tls.automatic.privateKey.algorithm","default":{"value":"ECDSA"},"name":"algorithm","required":true,"type":"string"},{"arg":"$resource.properties.tls.automatic.privateKey.rotationPolicy","default":{"value":"Always"},"name":"rotationPolicy","required":true,"type":"string"},{"arg":"$resource.properties.tls.automatic.privateKey.size","default":{"value":256},"format":{"maximum":65535,"minimum":0},"name":"size","required":true,"type":"integer32"}],"type":"object"},{"arg":"$resource.properties.tls.automatic.renewBefore","default":{"value":"240h"},"name":"renewBefore","type":"string"},{"arg":"$resource.properties.tls.automatic.san","name":"san","props":[{"arg":"$resource.properties.tls.automatic.san.dns","default":{"value":[]},"item":{"type":"string"},"name":"dns","required":true,"type":"array<string>"},{"arg":"$resource.properties.tls.automatic.san.ip","default":{"value":[]},"item":{"type":"string"},"name":"ip","required":true,"type":"array<string>"}],"type":"object"},{"arg":"$resource.properties.tls.automatic.secretName","name":"secretName","type":"string"},{"arg":"$resource.properties.tls.automatic.secretNamespace","name":"secretNamespace","type":"string"}],"type":"object"},{"arg":"$resource.properties.tls.keyVault","name":"keyVault","props":[{"arg":"$resource.properties.tls.keyVault.vault","name":"vault","props":[{"arg":"$resource.properties.tls.keyVault.vault.credentials","name":"credentials","props":[{"arg":"$resource.properties.tls.keyVault.vault.credentials.servicePrincipalLocalSecretName","name":"servicePrincipalLocalSecretName","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.properties.tls.keyVault.vault.directoryId","name":"directoryId","required":true,"type":"string"},{"arg":"$resource.properties.tls.keyVault.vault.name","name":"name","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.properties.tls.keyVault.vaultCaChainSecret","cls":"KeyVaultSecretObject_create","name":"vaultCaChainSecret","props":[{"arg":"@KeyVaultSecretObject_create.name","name":"name","required":true,"type":"string"},{"arg":"@KeyVaultSecretObject_create.version","name":"version","type":"string"}],"type":"object"},{"arg":"$resource.properties.tls.keyVault.vaultCert","name":"vaultCert","required":true,"type":"@KeyVaultSecretObject_create"}],"type":"object"},{"arg":"$resource.properties.tls.manual","name":"manual","props":[{"arg":"$resource.properties.tls.manual.secretName","name":"secretName","required":true,"type":"string"},{"arg":"$resource.properties.tls.manual.secretNamespace","name":"secretNamespace","type":"string"}],"type":"object"}],"type":"object"}],"type":"object"},{"additionalProps":{"item":{"type":"string"}},"arg":"$resource.tags","name":"tags","type":"object"}],"required":true,"type":"object"}}},"method":"put","path":{"params":[{"arg":"$Path.brokerName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"brokerName","required":true,"type":"string"},{"arg":"$Path.listenerName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"listenerName","required":true,"type":"string"},{"arg":"$Path.mqName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"mqName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","format":{"maxLength":90,"minLength":1},"name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","format":{"minLength":1},"name":"subscriptionId","required":true,"type":"string"}]},"query":{"consts":[{"const":true,"default":{"value":"2023-10-04-preview"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"name":"extendedLocation","props":[{"name":"name","required":true,"type":"string"},{"enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.IoTOperationsMQ/mq/{}/broker/{}/listener/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"location","required":true,"type":"ResourceLocation"},{"name":"name","readOnly":true,"type":"string"},{"clientFlatten":true,"name":"properties","props":[{"default":{"value":false},"name":"authenticationEnabled","type":"boolean"},{"default":{"value":false},"name":"authorizationEnabled","type":"boolean"},{"name":"brokerRef","required":true,"type":"string"},{"format":{"maximum":65535,"minimum":0},"name":"nodePort","type":"integer32"},{"format":{"maximum":65535,"minimum":0},"name":"port","required":true,"type":"integer32"},{"enum":{"items":[{"value":"Accepted"},{"value":"Canceled"},{"value":"Deleting"},{"value":"Failed"},{"value":"Provisioning"},{"value":"Succeeded"},{"value":"Updating"}]},"name":"provisioningState","readOnly":true,"type":"string"},{"default":{"value":"aio-mq-dmqtt-frontend"},"name":"serviceName","type":"string"},{"default":{"value":"clusterIp"},"enum":{"items":[{"value":"clusterIp"},{"value":"loadBalancer"},{"value":"nodePort"}]},"name":"serviceType","type":"string"},{"name":"tls","props":[{"name":"automatic","props":[{"default":{"value":"720h"},"name":"duration","type":"string"},{"name":"issuerRef","props":[{"default":{"value":"cert-manager.io"},"name":"group","required":true,"type":"string"},{"name":"kind","required":true,"type":"string"},{"name":"name","required":true,"type":"string"}],"required":true,"type":"object"},{"name":"privateKey","props":[{"default":{"value":"ECDSA"},"name":"algorithm","required":true,"type":"string"},{"default":{"value":"Always"},"name":"rotationPolicy","required":true,"type":"string"},{"default":{"value":256},"format":{"maximum":65535,"minimum":0},"name":"size","required":true,"type":"integer32"}],"type":"object"},{"default":{"value":"240h"},"name":"renewBefore","type":"string"},{"name":"san","props":[{"default":{"value":[]},"item":{"type":"string"},"name":"dns","required":true,"type":"array<string>"},{"default":{"value":[]},"item":{"type":"string"},"name":"ip","required":true,"type":"array<string>"}],"type":"object"},{"name":"secretName","type":"string"},{"name":"secretNamespace","type":"string"}],"type":"object"},{"name":"keyVault","props":[{"name":"vault","props":[{"name":"credentials","props":[{"name":"servicePrincipalLocalSecretName","required":true,"type":"string"}],"required":true,"type":"object"},{"name":"directoryId","required":true,"type":"string"},{"name":"name","required":true,"type":"string"}],"required":true,"type":"object"},{"cls":"KeyVaultSecretObject_read","name":"vaultCaChainSecret","props":[{"name":"name","required":true,"type":"string"},{"name":"version","type":"string"}],"type":"object"},{"name":"vaultCert","required":true,"type":"@KeyVaultSecretObject_read"}],"type":"object"},{"name":"manual","props":[{"name":"secretName","required":true,"type":"string"},{"name":"secretNamespace","type":"string"}],"type":"object"}],"type":"object"}],"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"additionalProps":{"item":{"type":"string"}},"name":"tags","type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"longRunning":{"finalStateVia":"azure-async-operation"},"operationId":"BrokerListener_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.iotoperationsmq/mq/{}/broker/{}/listener/{}","plane":"mgmt-plane"}]}