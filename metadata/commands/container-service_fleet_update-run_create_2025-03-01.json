{"argGroups":[{"args":[{"help":{"short":"The request should only proceed if an entity matches this string."},"options":["if-match"],"type":"string","var":"$Header.If-Match"},{"help":{"short":"The request should only proceed if no entity matches this string."},"options":["if-none-match"],"type":"string","var":"$Header.If-None-Match"},{"format":{"maxLength":63,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"help":{"short":"The name of the Fleet resource."},"idPart":"name","options":["fleet-name"],"required":true,"type":"string","var":"$Path.fleetName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"},{"format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"help":{"short":"The name of the UpdateRun resource."},"idPart":"child_name_1","options":["n","name","update-run-name"],"required":true,"type":"string","var":"$Path.updateRunName"}],"name":""},{"args":[{"args":[{"args":[{"enum":{"items":[{"name":"Consistent","value":"Consistent"},{"name":"Custom","value":"Custom"},{"name":"Latest","value":"Latest"}]},"help":{"short":"The node image upgrade type."},"options":["type"],"required":true,"type":"string","var":"$resource.properties.managedClusterUpdate.nodeImageSelection.type"}],"help":{"short":"The node image upgrade to be applied to the target nodes in update run."},"options":["node-image-selection"],"type":"object","var":"$resource.properties.managedClusterUpdate.nodeImageSelection"},{"args":[{"help":{"short":"The Kubernetes version to upgrade the member clusters to."},"options":["kubernetes-version"],"type":"string","var":"$resource.properties.managedClusterUpdate.upgrade.kubernetesVersion"},{"enum":{"items":[{"name":"ControlPlaneOnly","value":"ControlPlaneOnly"},{"name":"Full","value":"Full"},{"name":"NodeImageOnly","value":"NodeImageOnly"}]},"help":{"short":"ManagedClusterUpgradeType is the type of upgrade to be applied."},"options":["type"],"required":true,"type":"string","var":"$resource.properties.managedClusterUpdate.upgrade.type"}],"help":{"short":"The upgrade to apply to the ManagedClusters."},"options":["upgrade"],"required":true,"type":"object","var":"$resource.properties.managedClusterUpdate.upgrade"}],"group":"Properties","help":{"short":"The update to be applied to all clusters in the UpdateRun. The managedClusterUpdate can be modified until the run is started."},"options":["managed-cluster-update"],"type":"object","var":"$resource.properties.managedClusterUpdate"},{"args":[{"help":{"short":"The list of stages that compose this update run. Min size: 1."},"item":{"args":[{"help":{"short":"The time in seconds to wait at the end of this stage before starting the next one. Defaults to 0 seconds if unspecified."},"options":["after-stage-wait-in-seconds"],"type":"integer32","var":"$resource.properties.strategy.stages[].afterStageWaitInSeconds"},{"help":{"short":"Defines the groups to be executed in parallel in this stage. Duplicate groups are not allowed. Min size: 1."},"item":{"args":[{"format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"help":{"short":"Name of the group. It must match a group name of an existing fleet member. "},"options":["name"],"required":true,"type":"string","var":"$resource.properties.strategy.stages[].groups[].name"}],"type":"object"},"options":["groups"],"type":"array<object>","var":"$resource.properties.strategy.stages[].groups"},{"format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"help":{"short":"The name of the stage. Must be unique within the UpdateRun."},"options":["name"],"required":true,"type":"string","var":"$resource.properties.strategy.stages[].name"}],"type":"object"},"options":["stages"],"required":true,"type":"array<object>","var":"$resource.properties.strategy.stages"}],"group":"Properties","help":{"short":"The strategy defines the order in which the clusters will be updated. If not set, all members will be updated sequentially. The UpdateRun status will show a single UpdateStage and a single UpdateGroup targeting all members. The strategy of the UpdateRun can be modified until the run is started."},"options":["strategy"],"type":"object","var":"$resource.properties.strategy"},{"group":"Properties","help":{"short":"The resource id of the FleetUpdateStrategy resource to reference.  When creating a new run, there are three ways to define a strategy for the run: 1. Define a new strategy in place: Set the \"strategy\" field. 2. Use an existing strategy: Set the \"updateStrategyId\" field. (since 2023-08-15-preview) 3. Use the default strategy to update all the members one by one: Leave both \"updateStrategyId\" and \"strategy\" unset. (since 2023-08-15-preview)  Setting both \"updateStrategyId\" and \"strategy\" is invalid.  UpdateRuns created by \"updateStrategyId\" snapshot the referenced UpdateStrategy at the time of creation and store it in the \"strategy\" field.  Subsequent changes to the referenced FleetUpdateStrategy resource do not propagate. UpdateRunStrategy changes can be made directly on the \"strategy\" field before launching the UpdateRun."},"options":["update-strategy-id"],"type":"ResourceId","var":"$resource.properties.updateStrategyId"}],"name":"Properties"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ContainerService/fleets/{fleetName}/updateRuns/{updateRunName}","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"resource","props":[{"clientFlatten":true,"name":"properties","props":[{"arg":"$resource.properties.managedClusterUpdate","name":"managedClusterUpdate","props":[{"arg":"$resource.properties.managedClusterUpdate.nodeImageSelection","name":"nodeImageSelection","props":[{"arg":"$resource.properties.managedClusterUpdate.nodeImageSelection.type","enum":{"items":[{"value":"Consistent"},{"value":"Custom"},{"value":"Latest"}]},"name":"type","required":true,"type":"string"}],"type":"object"},{"arg":"$resource.properties.managedClusterUpdate.upgrade","name":"upgrade","props":[{"arg":"$resource.properties.managedClusterUpdate.upgrade.kubernetesVersion","name":"kubernetesVersion","type":"string"},{"arg":"$resource.properties.managedClusterUpdate.upgrade.type","enum":{"items":[{"value":"ControlPlaneOnly"},{"value":"Full"},{"value":"NodeImageOnly"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"}],"required":true,"type":"object"},{"arg":"$resource.properties.strategy","name":"strategy","props":[{"arg":"$resource.properties.strategy.stages","identifiers":["name"],"item":{"props":[{"arg":"$resource.properties.strategy.stages[].afterStageWaitInSeconds","name":"afterStageWaitInSeconds","type":"integer32"},{"arg":"$resource.properties.strategy.stages[].groups","identifiers":["name"],"item":{"props":[{"arg":"$resource.properties.strategy.stages[].groups[].name","format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"name":"name","required":true,"type":"string"}],"type":"object"},"name":"groups","type":"array<object>"},{"arg":"$resource.properties.strategy.stages[].name","format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"name":"name","required":true,"type":"string"}],"type":"object"},"name":"stages","required":true,"type":"array<object>"}],"type":"object"},{"arg":"$resource.properties.updateStrategyId","name":"updateStrategyId","type":"ResourceId"}],"type":"object"}],"required":true,"type":"object"}}},"header":{"params":[{"arg":"$Header.If-Match","name":"If-Match","type":"string"},{"arg":"$Header.If-None-Match","name":"If-None-Match","type":"string"}]},"method":"put","path":{"params":[{"arg":"$Path.fleetName","format":{"maxLength":63,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"name":"fleetName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","format":{"maxLength":90,"minLength":1},"name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","name":"subscriptionId","required":true,"type":"uuid"},{"arg":"$Path.updateRunName","format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"name":"updateRunName","required":true,"type":"string"}]},"query":{"consts":[{"const":true,"default":{"value":"2025-03-01"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"name":"eTag","readOnly":true,"type":"string"},{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.ContainerService/fleets/{}/updateRuns/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"name","readOnly":true,"type":"string"},{"clientFlatten":true,"name":"properties","props":[{"name":"autoUpgradeProfileId","readOnly":true,"type":"ResourceId"},{"name":"managedClusterUpdate","props":[{"name":"nodeImageSelection","props":[{"identifiers":["version"],"item":{"cls":"NodeImageVersion_read","props":[{"name":"version","readOnly":true,"type":"string"}],"type":"object"},"name":"customNodeImageVersions","type":"array<object>"},{"enum":{"items":[{"value":"Consistent"},{"value":"Custom"},{"value":"Latest"}]},"name":"type","required":true,"type":"string"}],"type":"object"},{"name":"upgrade","props":[{"name":"kubernetesVersion","type":"string"},{"enum":{"items":[{"value":"ControlPlaneOnly"},{"value":"Full"},{"value":"NodeImageOnly"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"}],"required":true,"type":"object"},{"enum":{"items":[{"value":"Canceled"},{"value":"Failed"},{"value":"Succeeded"}]},"name":"provisioningState","readOnly":true,"type":"string"},{"name":"status","props":[{"name":"nodeImageSelection","props":[{"identifiers":["version"],"item":{"type":"@NodeImageVersion_read"},"name":"selectedNodeImageVersions","readOnly":true,"type":"array<@NodeImageVersion_read>"}],"readOnly":true,"type":"object"},{"identifiers":["name"],"item":{"props":[{"name":"afterStageWaitStatus","props":[{"name":"status","readOnly":true,"type":"@UpdateStatus_read"},{"name":"waitDurationInSeconds","readOnly":true,"type":"integer32"}],"readOnly":true,"type":"object"},{"identifiers":["name"],"item":{"props":[{"identifiers":["name"],"item":{"props":[{"name":"clusterResourceId","readOnly":true,"type":"string"},{"name":"message","readOnly":true,"type":"string"},{"name":"name","readOnly":true,"type":"string"},{"name":"operationId","readOnly":true,"type":"string"},{"name":"status","readOnly":true,"type":"@UpdateStatus_read"}],"type":"object"},"name":"members","readOnly":true,"type":"array<object>"},{"name":"name","readOnly":true,"type":"string"},{"name":"status","readOnly":true,"type":"@UpdateStatus_read"}],"type":"object"},"name":"groups","readOnly":true,"type":"array<object>"},{"name":"name","readOnly":true,"type":"string"},{"name":"status","readOnly":true,"type":"@UpdateStatus_read"}],"type":"object"},"name":"stages","readOnly":true,"type":"array<object>"},{"cls":"UpdateStatus_read","name":"status","props":[{"format":{"protocol":"iso"},"name":"completedTime","readOnly":true,"type":"dateTime"},{"cls":"ErrorDetail_read","name":"error","props":[{"item":{"props":[{"additionalProps":{"item":{"type":"any"},"readOnly":true},"name":"info","readOnly":true,"type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"name":"additionalInfo","readOnly":true,"type":"array<object>"},{"name":"code","readOnly":true,"type":"string"},{"identifiers":["target","message"],"item":{"type":"@ErrorDetail_read"},"name":"details","readOnly":true,"type":"array<@ErrorDetail_read>"},{"name":"message","readOnly":true,"type":"string"},{"name":"target","readOnly":true,"type":"string"}],"readOnly":true,"type":"object"},{"format":{"protocol":"iso"},"name":"startTime","readOnly":true,"type":"dateTime"},{"enum":{"items":[{"value":"Completed"},{"value":"Failed"},{"value":"NotStarted"},{"value":"Pending"},{"value":"Running"},{"value":"Skipped"},{"value":"Stopped"},{"value":"Stopping"}]},"name":"state","readOnly":true,"type":"string"}],"readOnly":true,"type":"object"}],"readOnly":true,"type":"object"},{"name":"strategy","props":[{"identifiers":["name"],"item":{"props":[{"name":"afterStageWaitInSeconds","type":"integer32"},{"identifiers":["name"],"item":{"props":[{"format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"name":"name","required":true,"type":"string"}],"type":"object"},"name":"groups","type":"array<object>"},{"format":{"maxLength":50,"minLength":1,"pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"},"name":"name","required":true,"type":"string"}],"type":"object"},"name":"stages","required":true,"type":"array<object>"}],"type":"object"},{"name":"updateStrategyId","type":"ResourceId"}],"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"longRunning":{"finalStateVia":"azure-async-operation"},"operationId":"UpdateRuns_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.containerservice/fleets/{}/updateruns/{}","plane":"mgmt-plane"}]}