{"argGroups":[{"args":[{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ broker resource"},"idPart":"child_name_1","options":["n","name","broker-name"],"required":true,"type":"string","var":"$Path.brokerName"},{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ resource"},"idPart":"name","options":["mq-name"],"required":true,"type":"string","var":"$Path.mqName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"args":[{"help":{"short":"Image pull policy."},"options":["pull-policy"],"type":"string","var":"@ContainerImage_create.pullPolicy"},{"help":{"short":"Image pull secrets."},"options":["pull-secrets"],"type":"string","var":"@ContainerImage_create.pullSecrets"},{"help":{"short":"The Docker image name."},"options":["repository"],"required":true,"type":"string","var":"@ContainerImage_create.repository"},{"help":{"short":"The Docker  image tag."},"options":["tag"],"required":true,"type":"string","var":"@ContainerImage_create.tag"}],"cls":"ContainerImage_create","group":"Properties","help":{"short":"The details of Authentication Docker Image."},"options":["auth-image"],"type":"object","var":"$resource.properties.authImage"},{"group":"Properties","help":{"short":"The details of Broker Docker Image."},"options":["broker-image"],"type":"@ContainerImage_create","var":"$resource.properties.brokerImage"},{"args":[{"help":{"short":"Toleration effect."},"options":["effect"],"required":true,"type":"string","var":"@NodeTolerations_create.effect"},{"help":{"short":"Toleration key."},"options":["key"],"required":true,"type":"string","var":"@NodeTolerations_create.key"},{"help":{"short":"Toleration operator like 'Exists', 'Equal' etc."},"options":["operator"],"required":true,"type":"string","var":"@NodeTolerations_create.operator"},{"help":{"short":"Toleration Value."},"options":["value"],"required":true,"type":"string","var":"@NodeTolerations_create.value"}],"cls":"NodeTolerations_create","group":"Properties","help":{"short":"The details of Node Tolerations for Broker Pods."},"options":["broker-node-tolerations"],"type":"object","var":"$resource.properties.brokerNodeTolerations"},{"args":[{"args":[{"format":{"maximum":65535,"minimum":0},"help":{"short":"Partitions is desired number of physical backend chains of the given distributed MQTT broker."},"options":["partitions"],"required":true,"type":"integer32","var":"$resource.properties.cardinality.backendChain.partitions"},{"format":{"maximum":65535,"minimum":0},"help":{"short":"Redundancy Factor is desired numbers of broker instances in one chain."},"options":["redundancy-factor"],"required":true,"type":"integer32","var":"$resource.properties.cardinality.backendChain.redundancyFactor"},{"help":{"short":"Defines whether disk transfer is enabled or not."},"options":["temporary-disk-transfer-enabled"],"type":"boolean","var":"$resource.properties.cardinality.backendChain.temporaryDiskTransferEnabled"},{"format":{"maximum":100,"minimum":0},"help":{"short":"Defines the percentage usage of buffer pool above which disk transfer will start."},"options":["temporary-disk-transfer-high-watermark-percent"],"type":"integer32","var":"$resource.properties.cardinality.backendChain.temporaryDiskTransferHighWatermarkPercent"},{"format":{"maximum":100,"minimum":0},"help":{"short":"Defines the percentage usage of buffer pool below which disk transfer will stop."},"options":["temporary-disk-transfer-low-watermark-percent"],"type":"integer32","var":"$resource.properties.cardinality.backendChain.temporaryDiskTransferLowWatermarkPercent"},{"format":{"maximum":100,"minimum":0},"help":{"short":"Defines the limits for memory usage percent of the backend instances of the MQTT broker."},"options":["temporary-max-backend-mem-usage-percent"],"type":"integer32","var":"$resource.properties.cardinality.backendChain.temporaryMaxBackendMemUsagePercent"},{"args":[{"format":{"maximum":65535,"minimum":0},"help":{"short":"Maximum number of messages a client can have inflight."},"options":["max-inflight-messages"],"required":true,"type":"integer32","var":"@TemporaryResourceLimitsConfig_create.maxInflightMessages"},{"format":{"maximum":65535,"minimum":0},"help":{"short":"Maximum number of patch inflight per node."},"options":["max-inflight-patches"],"required":true,"type":"integer32","var":"@TemporaryResourceLimitsConfig_create.maxInflightPatches"},{"format":{"maximum":65535,"minimum":0},"help":{"short":"Maximum number of patch a client can have in flight."},"options":["max-inflight-patches-per-client"],"required":true,"type":"integer32","var":"@TemporaryResourceLimitsConfig_create.maxInflightPatchesPerClient"},{"format":{"maximum":4294967295,"minimum":0},"help":{"short":"Maximum message expiry interval, in seconds."},"options":["max-message-expiry-secs"],"type":"integer64","var":"@TemporaryResourceLimitsConfig_create.maxMessageExpirySecs"},{"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Maximum receive for external clients."},"options":["max-queued-messages"],"required":true,"type":"integer64","var":"@TemporaryResourceLimitsConfig_create.maxQueuedMessages"},{"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Maximum receive QoS0 for external clients."},"options":["max-queued-qos0-messages"],"required":true,"type":"integer64","var":"@TemporaryResourceLimitsConfig_create.maxQueuedQos0Messages"},{"format":{"maximum":4294967295,"minimum":0},"help":{"short":"Maximum session expiry interval, in seconds."},"options":["max-session-expiry-secs"],"required":true,"type":"integer64","var":"@TemporaryResourceLimitsConfig_create.maxSessionExpirySecs"}],"cls":"TemporaryResourceLimitsConfig_create","help":{"short":"Defines the limits for resources of the backend instances of the MQTT broker."},"options":["temporary-resource-limits"],"type":"object","var":"$resource.properties.cardinality.backendChain.temporaryResourceLimits"},{"default":{"value":1},"format":{"maximum":65535,"minimum":0},"help":{"short":"Number of logical backend workers per pod."},"options":["workers"],"type":"integer32","var":"$resource.properties.cardinality.backendChain.workers"}],"help":{"short":"The backend broker desired properties"},"options":["backend-chain"],"required":true,"type":"object","var":"$resource.properties.cardinality.backendChain"},{"args":[{"format":{"maximum":65535,"minimum":0},"help":{"short":"Replicas is desired number of frontend replicas of the given distributed MQTT broker."},"options":["replicas"],"required":true,"type":"integer32","var":"$resource.properties.cardinality.frontend.replicas"},{"help":{"short":"Defines the limits for resources of the frontend instances of the MQTT broker."},"options":["temporary-resource-limits"],"type":"@TemporaryResourceLimitsConfig_create","var":"$resource.properties.cardinality.frontend.temporaryResourceLimits"},{"default":{"value":2},"format":{"maximum":65535,"minimum":0},"help":{"short":"Number of logical frontend workers per pod."},"options":["workers"],"type":"integer32","var":"$resource.properties.cardinality.frontend.workers"}],"help":{"short":"The frontend broker desired properties"},"options":["frontend"],"required":true,"type":"object","var":"$resource.properties.cardinality.frontend"}],"group":"Properties","help":{"short":"The cardinality details of the broker."},"options":["cardinality"],"type":"object","var":"$resource.properties.cardinality"},{"args":[{"help":{"short":"Diagnostic Service endpoint"},"options":["diagnostic-service-endpoint"],"type":"string","var":"$resource.properties.diagnostics.diagnosticServiceEndpoint"},{"default":{"value":true},"help":{"short":"Knob to enable/disable metrics. Default = true"},"options":["enable-metrics"],"type":"boolean","var":"$resource.properties.diagnostics.enableMetrics"},{"default":{"value":true},"help":{"short":"Enable self check on Broker via Probe."},"options":["enable-self-check"],"type":"boolean","var":"$resource.properties.diagnostics.enableSelfCheck"},{"default":{"value":true},"help":{"short":"Enable self tracing on the Broker so that every selfCheckFrequencySeconds a random message is traced even if it didn't have trace context."},"options":["enable-self-tracing"],"type":"boolean","var":"$resource.properties.diagnostics.enableSelfTracing"},{"default":{"value":true},"help":{"short":"Knob to enable/disable entire tracing infrastructure."},"options":["enable-tracing"],"type":"boolean","var":"$resource.properties.diagnostics.enableTracing"},{"default":{"value":"text"},"help":{"short":"Format for the logs generated."},"options":["log-format"],"type":"string","var":"$resource.properties.diagnostics.logFormat"},{"default":{"value":"info,hyper=off,kube_client=off,tower=off,conhash=off,h2=off"},"help":{"short":"Log level for the Broker."},"options":["log-level"],"type":"string","var":"$resource.properties.diagnostics.logLevel"},{"default":{"value":60},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Maximum time for the CellMap to live."},"options":["max-cell-map-lifetime"],"type":"integer64","var":"$resource.properties.diagnostics.maxCellMapLifetime"},{"default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Metric update frequency in seconds."},"options":["metric-update-frequency-seconds"],"type":"integer64","var":"$resource.properties.diagnostics.metricUpdateFrequencySeconds"},{"default":{"value":"sample.azurecr.io/diagnostics-probe:0.5.0"},"help":{"short":"Probe Image to run."},"options":["probe-image"],"type":"string","var":"$resource.properties.diagnostics.probeImage"},{"default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Frequency for the self check to run."},"options":["self-check-frequency-seconds"],"type":"integer64","var":"$resource.properties.diagnostics.selfCheckFrequencySeconds"},{"default":{"value":15},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Time out period of the self check."},"options":["self-check-timeout-seconds"],"type":"integer64","var":"$resource.properties.diagnostics.selfCheckTimeoutSeconds"},{"default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"The frequency at which selfTrace should run."},"options":["self-trace-frequency-seconds"],"type":"integer64","var":"$resource.properties.diagnostics.selfTraceFrequencySeconds"},{"default":{"value":1000},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"The number of the spans generated by the Tracing."},"options":["span-channel-capacity"],"type":"integer64","var":"$resource.properties.diagnostics.spanChannelCapacity"}],"group":"Properties","help":{"short":"The diagnostic details of the broker deployment."},"options":["diagnostics"],"type":"object","var":"$resource.properties.diagnostics"},{"args":[{"args":[{"help":{"short":"AccessModes contains the desired access modes the volume should have. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#access-modes-1"},"item":{"type":"string"},"options":["access-modes"],"type":"array<string>","var":"@VolumeClaimSpec_create.accessModes"},{"args":[{"help":{"short":"APIGroup is the group for the resource being referenced. If APIGroup is not specified, the specified Kind must be in the core API group. For any other third-party types, APIGroup is required."},"options":["api-group"],"type":"string","var":"@VolumeClaimSpec_create.dataSource.apiGroup"},{"help":{"short":"Kind is the type of resource being referenced"},"options":["kind"],"required":true,"type":"string","var":"@VolumeClaimSpec_create.dataSource.kind"},{"help":{"short":"Name is the name of resource being referenced"},"options":["name"],"required":true,"type":"string","var":"@VolumeClaimSpec_create.dataSource.name"}],"help":{"short":"This field can be used to specify either: * An existing VolumeSnapshot object (snapshot.storage.k8s.io/VolumeSnapshot) * An existing PVC (PersistentVolumeClaim) If the provisioner or an external controller can support the specified data source, it will create a new volume based on the contents of the specified data source. If the AnyVolumeDataSource feature gate is enabled, this field will always have the same contents as the DataSourceRef field."},"options":["data-source"],"type":"object","var":"@VolumeClaimSpec_create.dataSource"},{"args":[{"help":{"short":"APIGroup is the group for the resource being referenced. If APIGroup is not specified, the specified Kind must be in the core API group. For any other third-party types, APIGroup is required."},"options":["api-group"],"type":"string","var":"@VolumeClaimSpec_create.dataSourceRef.apiGroup"},{"help":{"short":"Kind is the type of resource being referenced"},"options":["kind"],"required":true,"type":"string","var":"@VolumeClaimSpec_create.dataSourceRef.kind"},{"help":{"short":"Name is the name of resource being referenced"},"options":["name"],"required":true,"type":"string","var":"@VolumeClaimSpec_create.dataSourceRef.name"}],"help":{"short":"Specifies the object from which to populate the volume with data, if a non-empty volume is desired. This may be any local object from a non-empty API group (non core object) or a PersistentVolumeClaim object. When this field is specified, volume binding will only succeed if the type of the specified object matches some installed volume populator or dynamic provisioner. This field will replace the functionality of the DataSource field and as such if both fields are non-empty, they must have the same value. For backwards compatibility, both fields (DataSource and DataSourceRef) will be set to the same value automatically if one of them is empty and the other is non-empty. There are two important differences between DataSource and DataSourceRef: * While DataSource only allows two specific types of objects, DataSourceRef allows any non-core object, as well as PersistentVolumeClaim objects. * While DataSource ignores disallowed values (dropping them), DataSourceRef preserves all values, and generates an error if a disallowed value is specified. (Alpha) Using this field requires the AnyVolumeDataSource feature gate to be enabled."},"options":["data-source-ref"],"type":"object","var":"@VolumeClaimSpec_create.dataSourceRef"},{"args":[{"additionalProps":{"item":{"type":"string"}},"help":{"short":"Limits describes the maximum amount of compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"},"options":["limits"],"type":"object","var":"@VolumeClaimSpec_create.resources.limits"},{"additionalProps":{"item":{"type":"string"}},"help":{"short":"Requests describes the minimum amount of compute resources required. If Requests is omitted for a container, it defaults to Limits if that is explicitly specified, otherwise to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"},"options":["requests"],"type":"object","var":"@VolumeClaimSpec_create.resources.requests"}],"help":{"short":"Resources represents the minimum resources the volume should have. If RecoverVolumeExpansionFailure feature is enabled users are allowed to specify resource requirements that are lower than previous value but must still be higher than capacity recorded in the status field of the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#resources"},"options":["resources"],"type":"object","var":"@VolumeClaimSpec_create.resources"},{"args":[{"help":{"short":"MatchExpressions is a list of label selector requirements. The requirements are ANDed."},"item":{"args":[{"help":{"short":"key is the label key that the selector applies to."},"options":["key"],"required":true,"type":"string","var":"@VolumeClaimSpec_create.selector.matchExpressions[].key"},{"help":{"short":"operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist."},"options":["operator"],"required":true,"type":"string","var":"@VolumeClaimSpec_create.selector.matchExpressions[].operator"},{"help":{"short":"values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch."},"item":{"type":"string"},"options":["values"],"type":"array<string>","var":"@VolumeClaimSpec_create.selector.matchExpressions[].values"}],"type":"object"},"options":["match-expressions"],"type":"array<object>","var":"@VolumeClaimSpec_create.selector.matchExpressions"},{"additionalProps":{"item":{"type":"string"}},"help":{"short":"MatchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is \"key\", the operator is \"In\", and the values array contains only \"value\". The requirements are ANDed."},"options":["match-labels"],"type":"object","var":"@VolumeClaimSpec_create.selector.matchLabels"}],"help":{"short":"A label query over volumes to consider for binding."},"options":["selector"],"type":"object","var":"@VolumeClaimSpec_create.selector"},{"help":{"short":"Name of the StorageClass required by the claim. More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes#class-1"},"options":["storage-class-name"],"type":"string","var":"@VolumeClaimSpec_create.storageClassName"},{"help":{"short":"volumeMode defines what type of volume is required by the claim. Value of Filesystem is implied when not included in claim spec. This is a beta feature."},"options":["volume-mode"],"type":"string","var":"@VolumeClaimSpec_create.volumeMode"},{"help":{"short":"VolumeName is the binding reference to the PersistentVolume backing this claim."},"options":["volume-name"],"type":"string","var":"@VolumeClaimSpec_create.volumeName"}],"cls":"VolumeClaimSpec_create","help":{"short":"Use the specified persistent volume claim template to mount a \"generic ephemeral volume\" for the message buffer. See <https://kubernetes.io/docs/concepts/storage/ephemeral-volumes/#generic-ephemeral-volumes> for details."},"options":["ephemeral-volume-claim-spec"],"type":"object","var":"$resource.properties.diskBackedMessageBufferSettings.ephemeralVolumeClaimSpec"},{"help":{"short":"The max size of the message buffer on disk. If a PVC template is specified using one of ephemeralVolumeClaimSpec or persistentVolumeClaimSpec, then this size is used as the request and limit sizes of that template. If neither ephemeralVolumeClaimSpec nor persistentVolumeClaimSpec are specified, then an emptyDir volume is mounted with this size as its limit. See <https://kubernetes.io/docs/concepts/storage/volumes/#emptydir> for details."},"options":["max-size"],"required":true,"type":"string","var":"$resource.properties.diskBackedMessageBufferSettings.maxSize"},{"help":{"short":"Use the specified persistent volume claim template to mount a persistent volume for the message buffer."},"options":["persistent-volume-claim-spec"],"type":"@VolumeClaimSpec_create","var":"$resource.properties.diskBackedMessageBufferSettings.persistentVolumeClaimSpec"}],"group":"Properties","help":{"short":"The settings of the disk-backed message buffer."},"options":["disk-backed-message-buffer-settings"],"type":"object","var":"$resource.properties.diskBackedMessageBufferSettings"},{"default":{"value":true},"group":"Properties","help":{"short":"The setting to enable or disable encryption of internal Traffic."},"options":["encrypt-internal-traffic"],"type":"boolean","var":"$resource.properties.encryptInternalTraffic"},{"group":"Properties","help":{"short":"The details of Health Manager Docker Image."},"options":["health-manager-image"],"type":"@ContainerImage_create","var":"$resource.properties.healthManagerImage"},{"group":"Properties","help":{"short":"The details of Node Tolerations for Health Manager Pods."},"options":["health-manager-node-tolerations"],"type":"@NodeTolerations_create","var":"$resource.properties.healthManagerNodeTolerations"},{"args":[{"default":{"value":"720h"},"help":{"short":"Duration of CA cert."},"options":["duration"],"required":true,"type":"string","var":"$resource.properties.internalCerts.duration"},{"args":[{"default":{"value":"ECDSA"},"help":{"short":"algorithm for private key."},"options":["algorithm"],"required":true,"type":"string","var":"$resource.properties.internalCerts.privateKey.algorithm"},{"default":{"value":"Always"},"help":{"short":"cert-manager rotationPolicy."},"options":["rotation-policy"],"required":true,"type":"string","var":"$resource.properties.internalCerts.privateKey.rotationPolicy"},{"default":{"value":256},"format":{"maximum":65535,"minimum":0},"help":{"short":"size of private key."},"options":["size"],"required":true,"type":"integer32","var":"$resource.properties.internalCerts.privateKey.size"}],"help":{"short":"Cert Manager private key."},"options":["private-key"],"required":true,"type":"object","var":"$resource.properties.internalCerts.privateKey"},{"default":{"value":"240h"},"help":{"short":"Renew before time of CA cert."},"options":["renew-before"],"required":true,"type":"string","var":"$resource.properties.internalCerts.renewBefore"}],"group":"Properties","help":{"short":"Details of the internal CA cert that will be used to secure communication between pods."},"options":["internal-certs"],"type":"object","var":"$resource.properties.internalCerts"},{"default":{"value":"medium"},"enum":{"items":[{"name":"high","value":"high"},{"name":"low","value":"low"},{"name":"medium","value":"medium"},{"name":"tiny","value":"tiny"}]},"group":"Properties","help":{"short":"Memory profile of broker."},"options":["memory-profile"],"type":"string","var":"$resource.properties.memoryProfile"},{"enum":{"items":[{"name":"auto","value":"auto"},{"name":"distributed","value":"distributed"}]},"group":"Properties","help":{"short":"The Running Mode of the Broker Deployment."},"options":["mode"],"type":"string","var":"$resource.properties.mode"}],"name":"Properties"},{"args":[{"args":[{"help":{"short":"The name of the extended location."},"options":["name"],"required":true,"type":"string","var":"$resource.extendedLocation.name"},{"enum":{"items":[{"name":"CustomLocation","value":"CustomLocation"}]},"help":{"short":"Type of ExtendedLocation."},"options":["type"],"required":true,"type":"string","var":"$resource.extendedLocation.type"}],"group":"Resource","help":{"short":"Extended Location"},"options":["extended-location"],"required":true,"type":"object","var":"$resource.extendedLocation"},{"group":"Resource","help":{"short":"The geo-location where the resource lives"},"options":["l","location"],"required":true,"type":"ResourceLocation","var":"$resource.location"},{"additionalProps":{"item":{"type":"string"}},"group":"Resource","help":{"short":"Resource tags."},"options":["tags"],"type":"object","var":"$resource.tags"}],"name":"Resource"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.IoTOperationsMQ/mq/{mqName}/broker/{brokerName}","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"resource","props":[{"arg":"$resource.extendedLocation","name":"extendedLocation","props":[{"arg":"$resource.extendedLocation.name","name":"name","required":true,"type":"string"},{"arg":"$resource.extendedLocation.type","enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.location","name":"location","required":true,"type":"ResourceLocation"},{"clientFlatten":true,"name":"properties","props":[{"arg":"$resource.properties.authImage","cls":"ContainerImage_create","name":"authImage","props":[{"arg":"@ContainerImage_create.pullPolicy","name":"pullPolicy","type":"string"},{"arg":"@ContainerImage_create.pullSecrets","name":"pullSecrets","type":"string"},{"arg":"@ContainerImage_create.repository","name":"repository","required":true,"type":"string"},{"arg":"@ContainerImage_create.tag","name":"tag","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.properties.brokerImage","name":"brokerImage","required":true,"type":"@ContainerImage_create"},{"arg":"$resource.properties.brokerNodeTolerations","cls":"NodeTolerations_create","name":"brokerNodeTolerations","props":[{"arg":"@NodeTolerations_create.effect","name":"effect","required":true,"type":"string"},{"arg":"@NodeTolerations_create.key","name":"key","required":true,"type":"string"},{"arg":"@NodeTolerations_create.operator","name":"operator","required":true,"type":"string"},{"arg":"@NodeTolerations_create.value","name":"value","required":true,"type":"string"}],"type":"object"},{"arg":"$resource.properties.cardinality","name":"cardinality","props":[{"arg":"$resource.properties.cardinality.backendChain","name":"backendChain","props":[{"arg":"$resource.properties.cardinality.backendChain.partitions","format":{"maximum":65535,"minimum":0},"name":"partitions","required":true,"type":"integer32"},{"arg":"$resource.properties.cardinality.backendChain.redundancyFactor","format":{"maximum":65535,"minimum":0},"name":"redundancyFactor","required":true,"type":"integer32"},{"arg":"$resource.properties.cardinality.backendChain.temporaryDiskTransferEnabled","name":"temporaryDiskTransferEnabled","type":"boolean"},{"arg":"$resource.properties.cardinality.backendChain.temporaryDiskTransferHighWatermarkPercent","format":{"maximum":100,"minimum":0},"name":"temporaryDiskTransferHighWatermarkPercent","type":"integer32"},{"arg":"$resource.properties.cardinality.backendChain.temporaryDiskTransferLowWatermarkPercent","format":{"maximum":100,"minimum":0},"name":"temporaryDiskTransferLowWatermarkPercent","type":"integer32"},{"arg":"$resource.properties.cardinality.backendChain.temporaryMaxBackendMemUsagePercent","format":{"maximum":100,"minimum":0},"name":"temporaryMaxBackendMemUsagePercent","type":"integer32"},{"arg":"$resource.properties.cardinality.backendChain.temporaryResourceLimits","cls":"TemporaryResourceLimitsConfig_create","name":"temporaryResourceLimits","props":[{"arg":"@TemporaryResourceLimitsConfig_create.maxInflightMessages","format":{"maximum":65535,"minimum":0},"name":"maxInflightMessages","required":true,"type":"integer32"},{"arg":"@TemporaryResourceLimitsConfig_create.maxInflightPatches","format":{"maximum":65535,"minimum":0},"name":"maxInflightPatches","required":true,"type":"integer32"},{"arg":"@TemporaryResourceLimitsConfig_create.maxInflightPatchesPerClient","format":{"maximum":65535,"minimum":0},"name":"maxInflightPatchesPerClient","required":true,"type":"integer32"},{"arg":"@TemporaryResourceLimitsConfig_create.maxMessageExpirySecs","format":{"maximum":4294967295,"minimum":0},"name":"maxMessageExpirySecs","type":"integer64"},{"arg":"@TemporaryResourceLimitsConfig_create.maxQueuedMessages","format":{"maximum":9223372036853999616,"minimum":0},"name":"maxQueuedMessages","required":true,"type":"integer64"},{"arg":"@TemporaryResourceLimitsConfig_create.maxQueuedQos0Messages","format":{"maximum":9223372036853999616,"minimum":0},"name":"maxQueuedQos0Messages","required":true,"type":"integer64"},{"arg":"@TemporaryResourceLimitsConfig_create.maxSessionExpirySecs","format":{"maximum":4294967295,"minimum":0},"name":"maxSessionExpirySecs","required":true,"type":"integer64"}],"type":"object"},{"arg":"$resource.properties.cardinality.backendChain.workers","default":{"value":1},"format":{"maximum":65535,"minimum":0},"name":"workers","type":"integer32"}],"required":true,"type":"object"},{"arg":"$resource.properties.cardinality.frontend","name":"frontend","props":[{"arg":"$resource.properties.cardinality.frontend.replicas","format":{"maximum":65535,"minimum":0},"name":"replicas","required":true,"type":"integer32"},{"arg":"$resource.properties.cardinality.frontend.temporaryResourceLimits","name":"temporaryResourceLimits","type":"@TemporaryResourceLimitsConfig_create"},{"arg":"$resource.properties.cardinality.frontend.workers","default":{"value":2},"format":{"maximum":65535,"minimum":0},"name":"workers","type":"integer32"}],"required":true,"type":"object"}],"type":"object"},{"arg":"$resource.properties.diagnostics","name":"diagnostics","props":[{"arg":"$resource.properties.diagnostics.diagnosticServiceEndpoint","name":"diagnosticServiceEndpoint","type":"string"},{"arg":"$resource.properties.diagnostics.enableMetrics","default":{"value":true},"name":"enableMetrics","type":"boolean"},{"arg":"$resource.properties.diagnostics.enableSelfCheck","default":{"value":true},"name":"enableSelfCheck","type":"boolean"},{"arg":"$resource.properties.diagnostics.enableSelfTracing","default":{"value":true},"name":"enableSelfTracing","type":"boolean"},{"arg":"$resource.properties.diagnostics.enableTracing","default":{"value":true},"name":"enableTracing","type":"boolean"},{"arg":"$resource.properties.diagnostics.logFormat","default":{"value":"text"},"name":"logFormat","type":"string"},{"arg":"$resource.properties.diagnostics.logLevel","default":{"value":"info,hyper=off,kube_client=off,tower=off,conhash=off,h2=off"},"name":"logLevel","type":"string"},{"arg":"$resource.properties.diagnostics.maxCellMapLifetime","default":{"value":60},"format":{"maximum":9223372036853999616,"minimum":0},"name":"maxCellMapLifetime","type":"integer64"},{"arg":"$resource.properties.diagnostics.metricUpdateFrequencySeconds","default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"name":"metricUpdateFrequencySeconds","type":"integer64"},{"arg":"$resource.properties.diagnostics.probeImage","default":{"value":"sample.azurecr.io/diagnostics-probe:0.5.0"},"name":"probeImage","type":"string"},{"arg":"$resource.properties.diagnostics.selfCheckFrequencySeconds","default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"name":"selfCheckFrequencySeconds","type":"integer64"},{"arg":"$resource.properties.diagnostics.selfCheckTimeoutSeconds","default":{"value":15},"format":{"maximum":9223372036853999616,"minimum":0},"name":"selfCheckTimeoutSeconds","type":"integer64"},{"arg":"$resource.properties.diagnostics.selfTraceFrequencySeconds","default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"name":"selfTraceFrequencySeconds","type":"integer64"},{"arg":"$resource.properties.diagnostics.spanChannelCapacity","default":{"value":1000},"format":{"maximum":9223372036853999616,"minimum":0},"name":"spanChannelCapacity","type":"integer64"}],"type":"object"},{"arg":"$resource.properties.diskBackedMessageBufferSettings","name":"diskBackedMessageBufferSettings","props":[{"arg":"$resource.properties.diskBackedMessageBufferSettings.ephemeralVolumeClaimSpec","cls":"VolumeClaimSpec_create","name":"ephemeralVolumeClaimSpec","props":[{"arg":"@VolumeClaimSpec_create.accessModes","item":{"type":"string"},"name":"accessModes","type":"array<string>"},{"arg":"@VolumeClaimSpec_create.dataSource","name":"dataSource","props":[{"arg":"@VolumeClaimSpec_create.dataSource.apiGroup","name":"apiGroup","type":"string"},{"arg":"@VolumeClaimSpec_create.dataSource.kind","name":"kind","required":true,"type":"string"},{"arg":"@VolumeClaimSpec_create.dataSource.name","name":"name","required":true,"type":"string"}],"type":"object"},{"arg":"@VolumeClaimSpec_create.dataSourceRef","name":"dataSourceRef","props":[{"arg":"@VolumeClaimSpec_create.dataSourceRef.apiGroup","name":"apiGroup","type":"string"},{"arg":"@VolumeClaimSpec_create.dataSourceRef.kind","name":"kind","required":true,"type":"string"},{"arg":"@VolumeClaimSpec_create.dataSourceRef.name","name":"name","required":true,"type":"string"}],"type":"object"},{"arg":"@VolumeClaimSpec_create.resources","name":"resources","props":[{"additionalProps":{"item":{"type":"string"}},"arg":"@VolumeClaimSpec_create.resources.limits","name":"limits","type":"object"},{"additionalProps":{"item":{"type":"string"}},"arg":"@VolumeClaimSpec_create.resources.requests","name":"requests","type":"object"}],"type":"object"},{"arg":"@VolumeClaimSpec_create.selector","name":"selector","props":[{"arg":"@VolumeClaimSpec_create.selector.matchExpressions","item":{"props":[{"arg":"@VolumeClaimSpec_create.selector.matchExpressions[].key","name":"key","required":true,"type":"string"},{"arg":"@VolumeClaimSpec_create.selector.matchExpressions[].operator","name":"operator","required":true,"type":"string"},{"arg":"@VolumeClaimSpec_create.selector.matchExpressions[].values","item":{"type":"string"},"name":"values","type":"array<string>"}],"type":"object"},"name":"matchExpressions","type":"array<object>"},{"additionalProps":{"item":{"type":"string"}},"arg":"@VolumeClaimSpec_create.selector.matchLabels","name":"matchLabels","type":"object"}],"type":"object"},{"arg":"@VolumeClaimSpec_create.storageClassName","name":"storageClassName","type":"string"},{"arg":"@VolumeClaimSpec_create.volumeMode","name":"volumeMode","type":"string"},{"arg":"@VolumeClaimSpec_create.volumeName","name":"volumeName","type":"string"}],"type":"object"},{"arg":"$resource.properties.diskBackedMessageBufferSettings.maxSize","name":"maxSize","required":true,"type":"string"},{"arg":"$resource.properties.diskBackedMessageBufferSettings.persistentVolumeClaimSpec","name":"persistentVolumeClaimSpec","type":"@VolumeClaimSpec_create"}],"type":"object"},{"arg":"$resource.properties.encryptInternalTraffic","default":{"value":true},"name":"encryptInternalTraffic","type":"boolean"},{"arg":"$resource.properties.healthManagerImage","name":"healthManagerImage","required":true,"type":"@ContainerImage_create"},{"arg":"$resource.properties.healthManagerNodeTolerations","name":"healthManagerNodeTolerations","type":"@NodeTolerations_create"},{"arg":"$resource.properties.internalCerts","name":"internalCerts","props":[{"arg":"$resource.properties.internalCerts.duration","default":{"value":"720h"},"name":"duration","required":true,"type":"string"},{"arg":"$resource.properties.internalCerts.privateKey","name":"privateKey","props":[{"arg":"$resource.properties.internalCerts.privateKey.algorithm","default":{"value":"ECDSA"},"name":"algorithm","required":true,"type":"string"},{"arg":"$resource.properties.internalCerts.privateKey.rotationPolicy","default":{"value":"Always"},"name":"rotationPolicy","required":true,"type":"string"},{"arg":"$resource.properties.internalCerts.privateKey.size","default":{"value":256},"format":{"maximum":65535,"minimum":0},"name":"size","required":true,"type":"integer32"}],"required":true,"type":"object"},{"arg":"$resource.properties.internalCerts.renewBefore","default":{"value":"240h"},"name":"renewBefore","required":true,"type":"string"}],"type":"object"},{"arg":"$resource.properties.memoryProfile","default":{"value":"medium"},"enum":{"items":[{"value":"high"},{"value":"low"},{"value":"medium"},{"value":"tiny"}]},"name":"memoryProfile","type":"string"},{"arg":"$resource.properties.mode","enum":{"items":[{"value":"auto"},{"value":"distributed"}]},"name":"mode","required":true,"type":"string"}],"type":"object"},{"additionalProps":{"item":{"type":"string"}},"arg":"$resource.tags","name":"tags","type":"object"}],"required":true,"type":"object"}}},"method":"put","path":{"params":[{"arg":"$Path.brokerName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"brokerName","required":true,"type":"string"},{"arg":"$Path.mqName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"mqName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","format":{"maxLength":90,"minLength":1},"name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","format":{"minLength":1},"name":"subscriptionId","required":true,"type":"string"}]},"query":{"consts":[{"const":true,"default":{"value":"2023-10-04-preview"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"name":"extendedLocation","props":[{"name":"name","required":true,"type":"string"},{"enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.IoTOperationsMQ/mq/{}/broker/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"location","required":true,"type":"ResourceLocation"},{"name":"name","readOnly":true,"type":"string"},{"clientFlatten":true,"name":"properties","props":[{"cls":"ContainerImage_read","name":"authImage","props":[{"name":"pullPolicy","type":"string"},{"name":"pullSecrets","type":"string"},{"name":"repository","required":true,"type":"string"},{"name":"tag","required":true,"type":"string"}],"required":true,"type":"object"},{"name":"brokerImage","required":true,"type":"@ContainerImage_read"},{"cls":"NodeTolerations_read","name":"brokerNodeTolerations","props":[{"name":"effect","required":true,"type":"string"},{"name":"key","required":true,"type":"string"},{"name":"operator","required":true,"type":"string"},{"name":"value","required":true,"type":"string"}],"type":"object"},{"name":"cardinality","props":[{"name":"backendChain","props":[{"format":{"maximum":65535,"minimum":0},"name":"partitions","required":true,"type":"integer32"},{"format":{"maximum":65535,"minimum":0},"name":"redundancyFactor","required":true,"type":"integer32"},{"name":"temporaryDiskTransferEnabled","type":"boolean"},{"format":{"maximum":100,"minimum":0},"name":"temporaryDiskTransferHighWatermarkPercent","type":"integer32"},{"format":{"maximum":100,"minimum":0},"name":"temporaryDiskTransferLowWatermarkPercent","type":"integer32"},{"format":{"maximum":100,"minimum":0},"name":"temporaryMaxBackendMemUsagePercent","type":"integer32"},{"cls":"TemporaryResourceLimitsConfig_read","name":"temporaryResourceLimits","props":[{"format":{"maximum":65535,"minimum":0},"name":"maxInflightMessages","required":true,"type":"integer32"},{"format":{"maximum":65535,"minimum":0},"name":"maxInflightPatches","required":true,"type":"integer32"},{"format":{"maximum":65535,"minimum":0},"name":"maxInflightPatchesPerClient","required":true,"type":"integer32"},{"format":{"maximum":4294967295,"minimum":0},"name":"maxMessageExpirySecs","type":"integer64"},{"format":{"maximum":9223372036853999616,"minimum":0},"name":"maxQueuedMessages","required":true,"type":"integer64"},{"format":{"maximum":9223372036853999616,"minimum":0},"name":"maxQueuedQos0Messages","required":true,"type":"integer64"},{"format":{"maximum":4294967295,"minimum":0},"name":"maxSessionExpirySecs","required":true,"type":"integer64"}],"type":"object"},{"default":{"value":1},"format":{"maximum":65535,"minimum":0},"name":"workers","type":"integer32"}],"required":true,"type":"object"},{"name":"frontend","props":[{"format":{"maximum":65535,"minimum":0},"name":"replicas","required":true,"type":"integer32"},{"name":"temporaryResourceLimits","type":"@TemporaryResourceLimitsConfig_read"},{"default":{"value":2},"format":{"maximum":65535,"minimum":0},"name":"workers","type":"integer32"}],"required":true,"type":"object"}],"type":"object"},{"name":"diagnostics","props":[{"name":"diagnosticServiceEndpoint","type":"string"},{"default":{"value":true},"name":"enableMetrics","type":"boolean"},{"default":{"value":true},"name":"enableSelfCheck","type":"boolean"},{"default":{"value":true},"name":"enableSelfTracing","type":"boolean"},{"default":{"value":true},"name":"enableTracing","type":"boolean"},{"default":{"value":"text"},"name":"logFormat","type":"string"},{"default":{"value":"info,hyper=off,kube_client=off,tower=off,conhash=off,h2=off"},"name":"logLevel","type":"string"},{"default":{"value":60},"format":{"maximum":9223372036853999616,"minimum":0},"name":"maxCellMapLifetime","type":"integer64"},{"default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"name":"metricUpdateFrequencySeconds","type":"integer64"},{"default":{"value":"sample.azurecr.io/diagnostics-probe:0.5.0"},"name":"probeImage","type":"string"},{"default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"name":"selfCheckFrequencySeconds","type":"integer64"},{"default":{"value":15},"format":{"maximum":9223372036853999616,"minimum":0},"name":"selfCheckTimeoutSeconds","type":"integer64"},{"default":{"value":30},"format":{"maximum":9223372036853999616,"minimum":0},"name":"selfTraceFrequencySeconds","type":"integer64"},{"default":{"value":1000},"format":{"maximum":9223372036853999616,"minimum":0},"name":"spanChannelCapacity","type":"integer64"}],"type":"object"},{"name":"diskBackedMessageBufferSettings","props":[{"cls":"VolumeClaimSpec_read","name":"ephemeralVolumeClaimSpec","props":[{"item":{"type":"string"},"name":"accessModes","type":"array<string>"},{"name":"dataSource","props":[{"name":"apiGroup","type":"string"},{"name":"kind","required":true,"type":"string"},{"name":"name","required":true,"type":"string"}],"type":"object"},{"name":"dataSourceRef","props":[{"name":"apiGroup","type":"string"},{"name":"kind","required":true,"type":"string"},{"name":"name","required":true,"type":"string"}],"type":"object"},{"name":"resources","props":[{"additionalProps":{"item":{"type":"string"}},"name":"limits","type":"object"},{"additionalProps":{"item":{"type":"string"}},"name":"requests","type":"object"}],"type":"object"},{"name":"selector","props":[{"item":{"props":[{"name":"key","required":true,"type":"string"},{"name":"operator","required":true,"type":"string"},{"item":{"type":"string"},"name":"values","type":"array<string>"}],"type":"object"},"name":"matchExpressions","type":"array<object>"},{"additionalProps":{"item":{"type":"string"}},"name":"matchLabels","type":"object"}],"type":"object"},{"name":"storageClassName","type":"string"},{"name":"volumeMode","type":"string"},{"name":"volumeName","type":"string"}],"type":"object"},{"name":"maxSize","required":true,"type":"string"},{"name":"persistentVolumeClaimSpec","type":"@VolumeClaimSpec_read"}],"type":"object"},{"default":{"value":true},"name":"encryptInternalTraffic","type":"boolean"},{"name":"healthManagerImage","required":true,"type":"@ContainerImage_read"},{"name":"healthManagerNodeTolerations","type":"@NodeTolerations_read"},{"name":"internalCerts","props":[{"default":{"value":"720h"},"name":"duration","required":true,"type":"string"},{"name":"privateKey","props":[{"default":{"value":"ECDSA"},"name":"algorithm","required":true,"type":"string"},{"default":{"value":"Always"},"name":"rotationPolicy","required":true,"type":"string"},{"default":{"value":256},"format":{"maximum":65535,"minimum":0},"name":"size","required":true,"type":"integer32"}],"required":true,"type":"object"},{"default":{"value":"240h"},"name":"renewBefore","required":true,"type":"string"}],"type":"object"},{"default":{"value":"medium"},"enum":{"items":[{"value":"high"},{"value":"low"},{"value":"medium"},{"value":"tiny"}]},"name":"memoryProfile","type":"string"},{"enum":{"items":[{"value":"auto"},{"value":"distributed"}]},"name":"mode","required":true,"type":"string"},{"enum":{"items":[{"value":"Accepted"},{"value":"Canceled"},{"value":"Deleting"},{"value":"Failed"},{"value":"Provisioning"},{"value":"Succeeded"},{"value":"Updating"}]},"name":"provisioningState","readOnly":true,"type":"string"}],"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"additionalProps":{"item":{"type":"string"}},"name":"tags","type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"longRunning":{"finalStateVia":"azure-async-operation"},"operationId":"Broker_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.iotoperationsmq/mq/{}/broker/{}","plane":"mgmt-plane"}]}