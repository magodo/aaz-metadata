{"argGroups":[{"args":[{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ broker/authentication resource"},"idPart":"child_name_2","options":["n","name","authentication-name"],"required":true,"type":"string","var":"$Path.authenticationName"},{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ broker resource"},"idPart":"child_name_1","options":["broker-name"],"required":true,"type":"string","var":"$Path.brokerName"},{"format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"help":{"short":"Name of MQ resource"},"idPart":"name","options":["mq-name"],"required":true,"type":"string","var":"$Path.mqName"},{"idPart":"resource_group","options":["g","resource-group"],"required":true,"type":"ResourceGroupName","var":"$Path.resourceGroupName"},{"idPart":"subscription","options":["subscription"],"required":true,"type":"SubscriptionId","var":"$Path.subscriptionId"}],"name":""},{"args":[{"group":"Properties","help":{"short":"The list of authentication methods supported by the Authentication Resource. For each array element, NOTE - Enum only authenticator type supported."},"item":{"args":[{"args":[{"args":[{"args":[{"args":[{"args":[{"args":[{"help":{"short":"KeyVault service principal local secret name."},"options":["service-principal-local-secret-name"],"required":true,"type":"string","var":"@KeyVaultConnectionProperties_create.credentials.servicePrincipalLocalSecretName"}],"help":{"short":"KeyVault credentials."},"options":["credentials"],"required":true,"type":"object","var":"@KeyVaultConnectionProperties_create.credentials"},{"help":{"short":"KeyVault directoryId."},"options":["directory-id"],"required":true,"type":"string","var":"@KeyVaultConnectionProperties_create.directoryId"},{"help":{"short":"KeyVault name."},"options":["name"],"required":true,"type":"string","var":"@KeyVaultConnectionProperties_create.name"}],"cls":"KeyVaultConnectionProperties_create","help":{"short":"KeyVault properties."},"options":["vault"],"required":true,"type":"object","var":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault.vault"},{"args":[{"help":{"short":"KeyVault secret name."},"options":["name"],"required":true,"type":"string","var":"@KeyVaultSecretObject_create.name"},{"help":{"short":"KeyVault secret version."},"options":["version"],"type":"string","var":"@KeyVaultSecretObject_create.version"}],"cls":"KeyVaultSecretObject_create","help":{"short":"KeyVault CA chain secret details."},"options":["vault-ca-chain-secret"],"type":"object","var":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault.vaultCaChainSecret"},{"help":{"short":"KeyVault Cert secret details."},"options":["vault-cert"],"required":true,"type":"@KeyVaultSecretObject_create","var":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault.vaultCert"}],"help":{"short":"Keyvault X509 secret properties."},"options":["key-vault"],"type":"object","var":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault"},{"help":{"short":"Secret where cert details are stored."},"options":["secret-name"],"type":"string","var":"$resource.properties.authenticationMethods[].custom.auth.x509.secretName"}],"help":{"short":"X509 Custom Auth type details."},"options":["x509"],"required":true,"type":"object","var":"$resource.properties.authenticationMethods[].custom.auth.x509"}],"help":{"short":"Custom Broker Authentication Method."},"options":["auth"],"type":"object","var":"$resource.properties.authenticationMethods[].custom.auth"},{"help":{"short":"CA cert config map to use."},"options":["ca-cert-config-map"],"type":"string","var":"$resource.properties.authenticationMethods[].custom.caCertConfigMap"},{"help":{"short":"Endpoint to connect to."},"options":["endpoint"],"required":true,"type":"string","var":"$resource.properties.authenticationMethods[].custom.endpoint"},{"additionalProps":{"item":{"type":"string"}},"help":{"short":"Configuration Headers to use."},"options":["headers"],"type":"object","var":"$resource.properties.authenticationMethods[].custom.headers"}],"help":{"short":"Custom Authentication Method."},"options":["custom"],"type":"object","var":"$resource.properties.authenticationMethods[].custom"},{"args":[{"help":{"short":"List of allowed audience."},"item":{"type":"string"},"options":["audiences"],"required":true,"type":"array<string>","var":"$resource.properties.authenticationMethods[].sat.audiences"}],"help":{"short":"Service Account Token Method."},"options":["sat"],"type":"object","var":"$resource.properties.authenticationMethods[].sat"},{"args":[{"help":{"short":"Mounted socket path for spiffe agent."},"options":["agent-socket-path"],"required":true,"type":"string","var":"$resource.properties.authenticationMethods[].svid.agentSocketPath"},{"default":{"value":3},"format":{"maximum":4294967295,"minimum":0},"help":{"short":"Maximum number of re-tries to fetch identity."},"options":["identity-max-retry"],"type":"integer64","var":"$resource.properties.authenticationMethods[].svid.identityMaxRetry"},{"default":{"value":5000},"format":{"maximum":9223372036853999616,"minimum":0},"help":{"short":"Maximum time to wait before fetching identity again."},"options":["identity-wait-retry-ms"],"type":"integer64","var":"$resource.properties.authenticationMethods[].svid.identityWaitRetryMs"}],"help":{"short":"Service Account Token Method."},"options":["svid"],"type":"object","var":"$resource.properties.authenticationMethods[].svid"},{"args":[{"args":[{"help":{"short":"KeyVault properties."},"options":["vault"],"required":true,"type":"@KeyVaultConnectionProperties_create","var":"@KeyVaultSecretProperties_create.vault"},{"help":{"short":"KeyVault secret details."},"options":["vault-secret"],"required":true,"type":"@KeyVaultSecretObject_create","var":"@KeyVaultSecretProperties_create.vaultSecret"}],"cls":"KeyVaultSecretProperties_create","help":{"short":"Keyvault username password secret properties."},"options":["key-vault"],"type":"object","var":"$resource.properties.authenticationMethods[].usernamePassword.keyVault"},{"help":{"short":"Secret where username and password are stored."},"options":["secret-name"],"type":"string","var":"$resource.properties.authenticationMethods[].usernamePassword.secretName"}],"help":{"short":"UsernamePassword Method."},"options":["username-password"],"type":"object","var":"$resource.properties.authenticationMethods[].usernamePassword"},{"args":[{"args":[{"help":{"short":"Keyvault x509 attributes secret properties."},"options":["key-vault"],"type":"@KeyVaultSecretProperties_create","var":"$resource.properties.authenticationMethods[].x509.attributes.keyVault"},{"help":{"short":"Secret where x509 attributes are stored."},"options":["secret-name"],"type":"string","var":"$resource.properties.authenticationMethods[].x509.attributes.secretName"}],"help":{"short":"K8S Secret name to mount for username and password."},"options":["attributes"],"type":"object","var":"$resource.properties.authenticationMethods[].x509.attributes"},{"default":{"value":"client-ca"},"help":{"short":"Trusted client ca cert config map."},"options":["trusted-client-ca-cert-config-map"],"type":"string","var":"$resource.properties.authenticationMethods[].x509.trustedClientCaCertConfigMap"}],"help":{"short":"X509 Method."},"options":["x509"],"type":"object","var":"$resource.properties.authenticationMethods[].x509"}],"type":"object"},"options":["authentication-methods"],"type":"array<object>","var":"$resource.properties.authenticationMethods"},{"group":"Properties","help":{"short":"The array of listener Resources it supports."},"item":{"type":"string"},"options":["listener-ref"],"type":"array<string>","var":"$resource.properties.listenerRef"}],"name":"Properties"},{"args":[{"args":[{"help":{"short":"The name of the extended location."},"options":["name"],"required":true,"type":"string","var":"$resource.extendedLocation.name"},{"enum":{"items":[{"name":"CustomLocation","value":"CustomLocation"}]},"help":{"short":"Type of ExtendedLocation."},"options":["type"],"required":true,"type":"string","var":"$resource.extendedLocation.type"}],"group":"Resource","help":{"short":"Extended Location"},"options":["extended-location"],"required":true,"type":"object","var":"$resource.extendedLocation"},{"group":"Resource","help":{"short":"The geo-location where the resource lives"},"options":["l","location"],"required":true,"type":"ResourceLocation","var":"$resource.location"},{"additionalProps":{"item":{"type":"string"}},"group":"Resource","help":{"short":"Resource tags."},"options":["tags"],"type":"object","var":"$resource.tags"}],"name":"Resource"}],"operations":[{"http":{"path":"/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.IoTOperationsMQ/mq/{mqName}/broker/{brokerName}/authentication/{authenticationName}","request":{"body":{"json":{"schema":{"clientFlatten":true,"name":"resource","props":[{"arg":"$resource.extendedLocation","name":"extendedLocation","props":[{"arg":"$resource.extendedLocation.name","name":"name","required":true,"type":"string"},{"arg":"$resource.extendedLocation.type","enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.location","name":"location","required":true,"type":"ResourceLocation"},{"clientFlatten":true,"name":"properties","props":[{"arg":"$resource.properties.authenticationMethods","item":{"props":[{"arg":"$resource.properties.authenticationMethods[].custom","name":"custom","props":[{"arg":"$resource.properties.authenticationMethods[].custom.auth","name":"auth","props":[{"arg":"$resource.properties.authenticationMethods[].custom.auth.x509","name":"x509","props":[{"arg":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault","name":"keyVault","props":[{"arg":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault.vault","cls":"KeyVaultConnectionProperties_create","name":"vault","props":[{"arg":"@KeyVaultConnectionProperties_create.credentials","name":"credentials","props":[{"arg":"@KeyVaultConnectionProperties_create.credentials.servicePrincipalLocalSecretName","name":"servicePrincipalLocalSecretName","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"@KeyVaultConnectionProperties_create.directoryId","name":"directoryId","required":true,"type":"string"},{"arg":"@KeyVaultConnectionProperties_create.name","name":"name","required":true,"type":"string"}],"required":true,"type":"object"},{"arg":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault.vaultCaChainSecret","cls":"KeyVaultSecretObject_create","name":"vaultCaChainSecret","props":[{"arg":"@KeyVaultSecretObject_create.name","name":"name","required":true,"type":"string"},{"arg":"@KeyVaultSecretObject_create.version","name":"version","type":"string"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].custom.auth.x509.keyVault.vaultCert","name":"vaultCert","required":true,"type":"@KeyVaultSecretObject_create"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].custom.auth.x509.secretName","name":"secretName","type":"string"}],"required":true,"type":"object"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].custom.caCertConfigMap","name":"caCertConfigMap","type":"string"},{"arg":"$resource.properties.authenticationMethods[].custom.endpoint","name":"endpoint","required":true,"type":"string"},{"additionalProps":{"item":{"type":"string"}},"arg":"$resource.properties.authenticationMethods[].custom.headers","name":"headers","type":"object"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].sat","name":"sat","props":[{"arg":"$resource.properties.authenticationMethods[].sat.audiences","item":{"type":"string"},"name":"audiences","required":true,"type":"array<string>"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].svid","name":"svid","props":[{"arg":"$resource.properties.authenticationMethods[].svid.agentSocketPath","name":"agentSocketPath","required":true,"type":"string"},{"arg":"$resource.properties.authenticationMethods[].svid.identityMaxRetry","default":{"value":3},"format":{"maximum":4294967295,"minimum":0},"name":"identityMaxRetry","type":"integer64"},{"arg":"$resource.properties.authenticationMethods[].svid.identityWaitRetryMs","default":{"value":5000},"format":{"maximum":9223372036853999616,"minimum":0},"name":"identityWaitRetryMs","type":"integer64"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].usernamePassword","name":"usernamePassword","props":[{"arg":"$resource.properties.authenticationMethods[].usernamePassword.keyVault","cls":"KeyVaultSecretProperties_create","name":"keyVault","props":[{"arg":"@KeyVaultSecretProperties_create.vault","name":"vault","required":true,"type":"@KeyVaultConnectionProperties_create"},{"arg":"@KeyVaultSecretProperties_create.vaultSecret","name":"vaultSecret","required":true,"type":"@KeyVaultSecretObject_create"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].usernamePassword.secretName","name":"secretName","type":"string"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].x509","name":"x509","props":[{"arg":"$resource.properties.authenticationMethods[].x509.attributes","name":"attributes","props":[{"arg":"$resource.properties.authenticationMethods[].x509.attributes.keyVault","name":"keyVault","type":"@KeyVaultSecretProperties_create"},{"arg":"$resource.properties.authenticationMethods[].x509.attributes.secretName","name":"secretName","type":"string"}],"type":"object"},{"arg":"$resource.properties.authenticationMethods[].x509.trustedClientCaCertConfigMap","default":{"value":"client-ca"},"name":"trustedClientCaCertConfigMap","type":"string"}],"type":"object"}],"type":"object"},"name":"authenticationMethods","required":true,"type":"array<object>"},{"arg":"$resource.properties.listenerRef","item":{"type":"string"},"name":"listenerRef","required":true,"type":"array<string>"}],"type":"object"},{"additionalProps":{"item":{"type":"string"}},"arg":"$resource.tags","name":"tags","type":"object"}],"required":true,"type":"object"}}},"method":"put","path":{"params":[{"arg":"$Path.authenticationName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"authenticationName","required":true,"type":"string"},{"arg":"$Path.brokerName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"brokerName","required":true,"type":"string"},{"arg":"$Path.mqName","format":{"pattern":"^[a-zA-Z0-9-]{3,24}$"},"name":"mqName","required":true,"type":"string"},{"arg":"$Path.resourceGroupName","format":{"maxLength":90,"minLength":1},"name":"resourceGroupName","required":true,"type":"string"},{"arg":"$Path.subscriptionId","format":{"minLength":1},"name":"subscriptionId","required":true,"type":"string"}]},"query":{"consts":[{"const":true,"default":{"value":"2023-10-04-preview"},"format":{"minLength":1},"name":"api-version","readOnly":true,"required":true,"type":"string"}]}},"responses":[{"body":{"json":{"schema":{"props":[{"name":"extendedLocation","props":[{"name":"name","required":true,"type":"string"},{"enum":{"items":[{"value":"CustomLocation"}]},"name":"type","required":true,"type":"string"}],"required":true,"type":"object"},{"format":{"template":"/subscriptions/{}/resourceGroups/{}/providers/Microsoft.IoTOperationsMQ/mq/{}/broker/{}/authentication/{}"},"name":"id","readOnly":true,"type":"ResourceId"},{"name":"location","required":true,"type":"ResourceLocation"},{"name":"name","readOnly":true,"type":"string"},{"clientFlatten":true,"name":"properties","props":[{"item":{"props":[{"name":"custom","props":[{"name":"auth","props":[{"name":"x509","props":[{"name":"keyVault","props":[{"cls":"KeyVaultConnectionProperties_read","name":"vault","props":[{"name":"credentials","props":[{"name":"servicePrincipalLocalSecretName","required":true,"type":"string"}],"required":true,"type":"object"},{"name":"directoryId","required":true,"type":"string"},{"name":"name","required":true,"type":"string"}],"required":true,"type":"object"},{"cls":"KeyVaultSecretObject_read","name":"vaultCaChainSecret","props":[{"name":"name","required":true,"type":"string"},{"name":"version","type":"string"}],"type":"object"},{"name":"vaultCert","required":true,"type":"@KeyVaultSecretObject_read"}],"type":"object"},{"name":"secretName","type":"string"}],"required":true,"type":"object"}],"type":"object"},{"name":"caCertConfigMap","type":"string"},{"name":"endpoint","required":true,"type":"string"},{"additionalProps":{"item":{"type":"string"}},"name":"headers","type":"object"}],"type":"object"},{"name":"sat","props":[{"item":{"type":"string"},"name":"audiences","required":true,"type":"array<string>"}],"type":"object"},{"name":"svid","props":[{"name":"agentSocketPath","required":true,"type":"string"},{"default":{"value":3},"format":{"maximum":4294967295,"minimum":0},"name":"identityMaxRetry","type":"integer64"},{"default":{"value":5000},"format":{"maximum":9223372036853999616,"minimum":0},"name":"identityWaitRetryMs","type":"integer64"}],"type":"object"},{"name":"usernamePassword","props":[{"cls":"KeyVaultSecretProperties_read","name":"keyVault","props":[{"name":"vault","required":true,"type":"@KeyVaultConnectionProperties_read"},{"name":"vaultSecret","required":true,"type":"@KeyVaultSecretObject_read"}],"type":"object"},{"name":"secretName","type":"string"}],"type":"object"},{"name":"x509","props":[{"name":"attributes","props":[{"name":"keyVault","type":"@KeyVaultSecretProperties_read"},{"name":"secretName","type":"string"}],"type":"object"},{"default":{"value":"client-ca"},"name":"trustedClientCaCertConfigMap","type":"string"}],"type":"object"}],"type":"object"},"name":"authenticationMethods","required":true,"type":"array<object>"},{"item":{"type":"string"},"name":"listenerRef","required":true,"type":"array<string>"},{"enum":{"items":[{"value":"Accepted"},{"value":"Canceled"},{"value":"Deleting"},{"value":"Failed"},{"value":"Provisioning"},{"value":"Succeeded"},{"value":"Updating"}]},"name":"provisioningState","readOnly":true,"type":"string"}],"type":"object"},{"name":"systemData","props":[{"format":{"protocol":"iso"},"name":"createdAt","type":"dateTime"},{"name":"createdBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"createdByType","type":"string"},{"format":{"protocol":"iso"},"name":"lastModifiedAt","type":"dateTime"},{"name":"lastModifiedBy","type":"string"},{"enum":{"items":[{"value":"Application"},{"value":"Key"},{"value":"ManagedIdentity"},{"value":"User"}]},"name":"lastModifiedByType","type":"string"}],"readOnly":true,"type":"object"},{"additionalProps":{"item":{"type":"string"}},"name":"tags","type":"object"},{"name":"type","readOnly":true,"type":"string"}],"type":"object"},"var":"$Instance"}},"statusCode":[200,201]},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true},{"body":{"json":{"schema":{"type":"@MgmtErrorFormat"}}},"isError":true}]},"longRunning":{"finalStateVia":"azure-async-operation"},"operationId":"BrokerAuthentication_CreateOrUpdate"}],"outputs":[{"clientFlatten":true,"ref":"$Instance","type":"object"}],"resources":[{"id":"/subscriptions/{}/resourcegroups/{}/providers/microsoft.iotoperationsmq/mq/{}/broker/{}/authentication/{}","plane":"mgmt-plane"}]}